{"ast":null,"code":"import _slicedToArray from\"/Users/trent/Sites/landlines_map_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from\"react\";import mapboxgl from\"!mapbox-gl\";// eslint-disable-line import/no-webpack-loader-syntax\nimport landLines from\"../../data/LandlinesWhite\";import landLinesThin from\"../../data/LandlinesThin\";import{Bttn}from\"./styles\";// import { ImInfo } from \"react-icons/im\";\nimport Header from\"../Header\";import ProjectComponent from\"../ProjectComponent\";import projects from\"../../data/landlines.json\";import Sidebar from\"../Sidebar\";import Pins from\"../Pins\";import{Transition}from\"react-transition-group\";// import { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";if(!(\"remove\"in Element.prototype)){Element.prototype.remove=function(){if(this.parentNode){this.parentNode.removeChild(this);}};}mapboxgl.accessToken=\"pk.eyJ1IjoibTEyLXRyZW50IiwiYSI6ImNrNDNuejljbjA0NzMzZW15eGk4OWMwdTEifQ.8rs6af8i7F8oeHDpbD_zQw\";var Map=function Map(_ref){var openAbout=_ref.openAbout;var mapContainerRef=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedProject=_useState4[0],setSelectedProject=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPanel=_useState6[0],setShowPanel=_useState6[1];var bounds=[[-110.113384,35.747004],// Southwest coordinates\n[-102.113384,39.747004]// Northeast coordinates\n];//   Determins which zoom level depending on screen size\nvar windowWidth=window.innerWidth;var zoomLVL=windowWidth<329?9:10;useEffect(function(){var map=new mapboxgl.Map({container:mapContainerRef.current,style:\"mapbox://styles/m12-trent/cknho9aum0mdz17p8qde7vrfo\",center:[-105.43647766113281,37.41816326969145],zoom:zoomLVL,minZoom:1,maxZoom:15,attributionControl:false,maxBounds:bounds,maxPitch:0,bearing:0});map.addControl(new mapboxgl.FullscreenControl({container:document.querySelector(\"body\")}));var nav=new mapboxgl.NavigationControl({showCompass:false});map.addControl(nav,'top-right');map.dragRotate.disable();// Load the Lines in Landlines\nmap.on(\"load\",function(){// Thick White Lines (Aka the Landlines)\nmap.addSource(\"landlines\",{type:\"geojson\",data:{type:\"Feature\",properties:{},geometry:{type:\"LineString\",coordinates:landLines}}});map.addLayer({id:\"lines\",type:\"line\",source:\"landlines\",layout:{\"line-join\":\"round\",\"line-cap\":\"round\"},paint:{\"line-color\":\"#fff\",\"line-opacity\":0.7,\"line-width\":1.25}});// Thin white lines\nmap.addSource(\"landlines-thin\",{type:\"geojson\",data:{type:\"Feature\",properties:{},geometry:{type:\"LineString\",coordinates:landLinesThin}}});map.addLayer({id:\"lines-thin\",type:\"line\",source:\"landlines-thin\",layout:{\"line-join\":\"round\",\"line-cap\":\"round\"},paint:{\"line-color\":\"#f9dec2\",\"line-opacity\":0.225,\"line-width\":1}});});setMap(map);// clean up on unmount\nreturn function(){return map.remove();};},[]);// eslint-disable-line react-hooks/exhaustive-deps\n// function handleClick() {\n//   const aboutSection = document.getElementById(\"about-section\");\n//   aboutSection.scrollIntoView({\n//     behavior: \"smooth\",\n//   });\n// }\nvar pickProject=function pickProject(project){setSelectedProject(project);if(map){map.flyTo({center:project.geometry.coordinates,zoom:13,speed:1,padding:{left:500}});}setShowPanel(true);};var closeSidebar=function closeSidebar(){setSelectedProject(null);setShowPanel(false);if(map){map.flyTo({zoom:9.5,speed:1,padding:{left:0,bottom:0}});}};var handleClick=function handleClick(){var aboutSection=document.getElementById(\"about-section\");aboutSection.scrollIntoView({behavior:\"smooth\"});};// console.log(projects.features[12].properties);\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",ref:mapContainerRef,children:[/*#__PURE__*/_jsx(Transition,{in:showPanel,timeout:300,children:function children(state){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{state:state,onClick:handleClick}),/*#__PURE__*/_jsx(Sidebar,{project:selectedProject,closeSidebar:closeSidebar,state:state})]});}}),/*#__PURE__*/_jsx(ProjectComponent,{pickProject:pickProject,projects:projects,map:map}),/*#__PURE__*/_jsx(Pins,{map:map,className:\"landmarks\"}),/*#__PURE__*/_jsx(Bttn,{className:\"about-bttn\",onClick:handleClick,children:\"About Landlines\"})]})});};export default Map;","map":{"version":3,"sources":["/Users/trent/Sites/landlines_map_test/src/components/Map/index.jsx"],"names":["React","useRef","useEffect","useState","mapboxgl","landLines","landLinesThin","Bttn","Header","ProjectComponent","projects","Sidebar","Pins","Transition","Element","prototype","remove","parentNode","removeChild","accessToken","Map","openAbout","mapContainerRef","map","setMap","selectedProject","setSelectedProject","showPanel","setShowPanel","bounds","windowWidth","window","innerWidth","zoomLVL","container","current","style","center","zoom","minZoom","maxZoom","attributionControl","maxBounds","maxPitch","bearing","addControl","FullscreenControl","document","querySelector","nav","NavigationControl","showCompass","dragRotate","disable","on","addSource","type","data","properties","geometry","coordinates","addLayer","id","source","layout","paint","pickProject","project","flyTo","speed","padding","left","closeSidebar","bottom","handleClick","aboutSection","getElementById","scrollIntoView","behavior","state"],"mappings":"4JAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CAAmC;AACnC,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,0BAA1B,CACA,OAASC,IAAT,KAAqB,UAArB,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,qBAA7B,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,SAAjB,CACA,OAASC,UAAT,KAA2B,wBAA3B,CAEA;6IAEA,GAAI,EAAE,UAAYC,CAAAA,OAAO,CAACC,SAAtB,CAAJ,CAAsC,CACpCD,OAAO,CAACC,SAAR,CAAkBC,MAAlB,CAA2B,UAAY,CACrC,GAAI,KAAKC,UAAT,CAAqB,CACnB,KAAKA,UAAL,CAAgBC,WAAhB,CAA4B,IAA5B,EACD,CACF,CAJD,CAKD,CAEDd,QAAQ,CAACe,WAAT,CACE,8FADF,CAGA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,MAAmB,IAAhBC,CAAAA,SAAgB,MAAhBA,SAAgB,CAC7B,GAAMC,CAAAA,eAAe,CAAGrB,MAAM,CAAC,IAAD,CAA9B,CACA,cAAsBE,QAAQ,CAAC,IAAD,CAA9B,wCAAOoB,GAAP,eAAYC,MAAZ,eACA,eAA8CrB,QAAQ,CAAC,IAAD,CAAtD,yCAAOsB,eAAP,eAAwBC,kBAAxB,eACA,eAAkCvB,QAAQ,CAAC,KAAD,CAA1C,yCAAOwB,SAAP,eAAkBC,YAAlB,eAEA,GAAIC,CAAAA,MAAM,CAAG,CACX,CAAC,CAAC,UAAF,CAAc,SAAd,CADW,CACe;AAC1B,CAAC,CAAC,UAAF,CAAc,SAAd,CAA0B;AAFf,CAAb,CAKA;AACA,GAAMC,CAAAA,WAAW,CAAGC,MAAM,CAACC,UAA3B,CACA,GAAMC,CAAAA,OAAO,CAAGH,WAAW,CAAG,GAAd,CAAoB,CAApB,CAAwB,EAAxC,CAEA5B,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,GAAG,CAAG,GAAInB,CAAAA,QAAQ,CAACgB,GAAb,CAAiB,CAC3Bc,SAAS,CAAEZ,eAAe,CAACa,OADA,CAE3BC,KAAK,CAAE,qDAFoB,CAG3BC,MAAM,CAAE,CAAC,CAAC,kBAAF,CAAsB,iBAAtB,CAHmB,CAI3BC,IAAI,CAAEL,OAJqB,CAK3BM,OAAO,CAAE,CALkB,CAM3BC,OAAO,CAAE,EANkB,CAO3BC,kBAAkB,CAAE,KAPO,CAQ3BC,SAAS,CAAEb,MARgB,CAS3Bc,QAAQ,CAAE,CATiB,CAU3BC,OAAO,CAAE,CAVkB,CAAjB,CAAZ,CAaArB,GAAG,CAACsB,UAAJ,CACE,GAAIzC,CAAAA,QAAQ,CAAC0C,iBAAb,CAA+B,CAC7BZ,SAAS,CAAEa,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CADkB,CAA/B,CADF,EAMA,GAAMC,CAAAA,GAAG,CAAG,GAAI7C,CAAAA,QAAQ,CAAC8C,iBAAb,CAA+B,CAACC,WAAW,CAAE,KAAd,CAA/B,CAAZ,CACJ5B,GAAG,CAACsB,UAAJ,CAAeI,GAAf,CAAoB,WAApB,EAEA1B,GAAG,CAAC6B,UAAJ,CAAeC,OAAf,GAEI;AACA9B,GAAG,CAAC+B,EAAJ,CAAO,MAAP,CAAe,UAAM,CACnB;AACA/B,GAAG,CAACgC,SAAJ,CAAc,WAAd,CAA2B,CACzBC,IAAI,CAAE,SADmB,CAEzBC,IAAI,CAAE,CACJD,IAAI,CAAE,SADF,CAEJE,UAAU,CAAE,EAFR,CAGJC,QAAQ,CAAE,CACRH,IAAI,CAAE,YADE,CAERI,WAAW,CAAEvD,SAFL,CAHN,CAFmB,CAA3B,EAWAkB,GAAG,CAACsC,QAAJ,CAAa,CACXC,EAAE,CAAE,OADO,CAEXN,IAAI,CAAE,MAFK,CAGXO,MAAM,CAAE,WAHG,CAIXC,MAAM,CAAE,CACN,YAAa,OADP,CAEN,WAAY,OAFN,CAJG,CAQXC,KAAK,CAAE,CACL,aAAc,MADT,CAEL,eAAgB,GAFX,CAGL,aAAc,IAHT,CARI,CAAb,EAeA;AACA1C,GAAG,CAACgC,SAAJ,CAAc,gBAAd,CAAgC,CAC9BC,IAAI,CAAE,SADwB,CAE9BC,IAAI,CAAE,CACJD,IAAI,CAAE,SADF,CAEJE,UAAU,CAAE,EAFR,CAGJC,QAAQ,CAAE,CACRH,IAAI,CAAE,YADE,CAERI,WAAW,CAAEtD,aAFL,CAHN,CAFwB,CAAhC,EAWAiB,GAAG,CAACsC,QAAJ,CAAa,CACXC,EAAE,CAAE,YADO,CAEXN,IAAI,CAAE,MAFK,CAGXO,MAAM,CAAE,gBAHG,CAIXC,MAAM,CAAE,CACN,YAAa,OADP,CAEN,WAAY,OAFN,CAJG,CAQXC,KAAK,CAAE,CACL,aAAc,SADT,CAEL,eAAgB,KAFX,CAGL,aAAc,CAHT,CARI,CAAb,EAcD,CAtDD,EAwDAzC,MAAM,CAACD,GAAD,CAAN,CACA;AACA,MAAO,kBAAMA,CAAAA,GAAG,CAACP,MAAJ,EAAN,EAAP,CACD,CArFQ,CAqFN,EArFM,CAAT,CAqFQ;AAER;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMkD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,OAAD,CAAa,CAC/BzC,kBAAkB,CAACyC,OAAD,CAAlB,CACA,GAAI5C,GAAJ,CAAS,CACPA,GAAG,CAAC6C,KAAJ,CAAU,CACR/B,MAAM,CAAE8B,OAAO,CAACR,QAAR,CAAiBC,WADjB,CAERtB,IAAI,CAAE,EAFE,CAGR+B,KAAK,CAAE,CAHC,CAIRC,OAAO,CAAE,CAAEC,IAAI,CAAE,GAAR,CAJD,CAAV,EAMD,CACD3C,YAAY,CAAC,IAAD,CAAZ,CACD,CAXD,CAaA,GAAM4C,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB9C,kBAAkB,CAAC,IAAD,CAAlB,CACAE,YAAY,CAAC,KAAD,CAAZ,CACA,GAAIL,GAAJ,CAAS,CACPA,GAAG,CAAC6C,KAAJ,CAAU,CACR9B,IAAI,CAAE,GADE,CAER+B,KAAK,CAAE,CAFC,CAGRC,OAAO,CAAE,CAAEC,IAAI,CAAE,CAAR,CAAWE,MAAM,CAAE,CAAnB,CAHD,CAAV,EAKD,CACF,CAVD,CAYA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAMC,CAAAA,YAAY,CAAG5B,QAAQ,CAAC6B,cAAT,CAAwB,eAAxB,CAArB,CACAD,YAAY,CAACE,cAAb,CAA4B,CAC1BC,QAAQ,CAAE,QADgB,CAA5B,EAGD,CALD,CAOA;AAEA,mBACE,sCACE,aAAK,SAAS,CAAC,eAAf,CAA+B,GAAG,CAAExD,eAApC,wBACE,KAAC,UAAD,EAAY,EAAE,CAAEK,SAAhB,CAA2B,OAAO,CAAE,GAApC,UACG,kBAACoD,KAAD,qBACC,wCACE,KAAC,MAAD,EAAQ,KAAK,CAAEA,KAAf,CAAsB,OAAO,CAAEL,WAA/B,EADF,cAGE,KAAC,OAAD,EACE,OAAO,CAAEjD,eADX,CAEE,YAAY,CAAE+C,YAFhB,CAGE,KAAK,CAAEO,KAHT,EAHF,GADD,EADH,EADF,cAeE,KAAC,gBAAD,EACE,WAAW,CAAEb,WADf,CAEE,QAAQ,CAAExD,QAFZ,CAGE,GAAG,CAAEa,GAHP,EAfF,cAoBE,KAAC,IAAD,EAAM,GAAG,CAAEA,GAAX,CAAgB,SAAS,CAAC,WAA1B,EApBF,cAqBE,KAAC,IAAD,EAAM,SAAS,CAAC,YAAhB,CAA6B,OAAO,CAAEmD,WAAtC,6BArBF,GADF,EADF,CA6BD,CA5KD,CA8KA,cAAetD,CAAAA,GAAf","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport mapboxgl from \"!mapbox-gl\"; // eslint-disable-line import/no-webpack-loader-syntax\nimport landLines from \"../../data/LandlinesWhite\";\nimport landLinesThin from \"../../data/LandlinesThin\";\nimport { Bttn } from \"./styles\";\n\n// import { ImInfo } from \"react-icons/im\";\nimport Header from \"../Header\";\nimport ProjectComponent from \"../ProjectComponent\";\nimport projects from \"../../data/landlines.json\";\nimport Sidebar from \"../Sidebar\";\nimport Pins from \"../Pins\";\nimport { Transition } from \"react-transition-group\";\n\n// import { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoibTEyLXRyZW50IiwiYSI6ImNrNDNuejljbjA0NzMzZW15eGk4OWMwdTEifQ.8rs6af8i7F8oeHDpbD_zQw\";\n\nconst Map = ({ openAbout }) => {\n  const mapContainerRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [showPanel, setShowPanel] = useState(false);\n\n  var bounds = [\n    [-110.113384, 35.747004], // Southwest coordinates\n    [-102.113384, 39.747004], // Northeast coordinates\n  ];\n\n  //   Determins which zoom level depending on screen size\n  const windowWidth = window.innerWidth;\n  const zoomLVL = windowWidth < 329 ? 9 : 10;\n\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: \"mapbox://styles/m12-trent/cknho9aum0mdz17p8qde7vrfo\",\n      center: [-105.43647766113281, 37.41816326969145],\n      zoom: zoomLVL,\n      minZoom: 1,\n      maxZoom: 15,\n      attributionControl: false,\n      maxBounds: bounds,\n      maxPitch: 0,\n      bearing: 0,\n    });\n\n    map.addControl(\n      new mapboxgl.FullscreenControl({\n        container: document.querySelector(\"body\"),\n      })\n    );\n\n    const nav = new mapboxgl.NavigationControl({showCompass: false});\nmap.addControl(nav, 'top-right');\n\nmap.dragRotate.disable();\n\n    // Load the Lines in Landlines\n    map.on(\"load\", () => {\n      // Thick White Lines (Aka the Landlines)\n      map.addSource(\"landlines\", {\n        type: \"geojson\",\n        data: {\n          type: \"Feature\",\n          properties: {},\n          geometry: {\n            type: \"LineString\",\n            coordinates: landLines,\n          },\n        },\n      });\n      map.addLayer({\n        id: \"lines\",\n        type: \"line\",\n        source: \"landlines\",\n        layout: {\n          \"line-join\": \"round\",\n          \"line-cap\": \"round\",\n        },\n        paint: {\n          \"line-color\": \"#fff\",\n          \"line-opacity\": 0.7,\n          \"line-width\": 1.25,\n        },\n      });\n\n      // Thin white lines\n      map.addSource(\"landlines-thin\", {\n        type: \"geojson\",\n        data: {\n          type: \"Feature\",\n          properties: {},\n          geometry: {\n            type: \"LineString\",\n            coordinates: landLinesThin,\n          },\n        },\n      });\n      map.addLayer({\n        id: \"lines-thin\",\n        type: \"line\",\n        source: \"landlines-thin\",\n        layout: {\n          \"line-join\": \"round\",\n          \"line-cap\": \"round\",\n        },\n        paint: {\n          \"line-color\": \"#f9dec2\",\n          \"line-opacity\": 0.225,\n          \"line-width\": 1,\n        },\n      });\n    });\n\n    setMap(map);\n    // clean up on unmount\n    return () => map.remove();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // function handleClick() {\n  //   const aboutSection = document.getElementById(\"about-section\");\n  //   aboutSection.scrollIntoView({\n  //     behavior: \"smooth\",\n  //   });\n  // }\n\n  const pickProject = (project) => {\n    setSelectedProject(project);\n    if (map) {\n      map.flyTo({\n        center: project.geometry.coordinates,\n        zoom: 13,\n        speed: 1,\n        padding: { left: 500 },\n      });\n    }\n    setShowPanel(true);\n  };\n\n  const closeSidebar = () => {\n    setSelectedProject(null);\n    setShowPanel(false);\n    if (map) {\n      map.flyTo({\n        zoom: 9.5,\n        speed: 1,\n        padding: { left: 0, bottom: 0 },\n      });\n    }\n  };\n\n  const handleClick = () => {\n    const aboutSection = document.getElementById(\"about-section\");\n    aboutSection.scrollIntoView({\n      behavior: \"smooth\",\n    });\n  };\n\n  // console.log(projects.features[12].properties);\n\n  return (\n    <>\n      <div className=\"map-container\" ref={mapContainerRef}>\n        <Transition in={showPanel} timeout={300}>\n          {(state) => (\n            <>\n              <Header state={state} onClick={handleClick} />\n\n              <Sidebar\n                project={selectedProject}\n                closeSidebar={closeSidebar}\n                state={state}\n              />\n            </>\n          )}\n        </Transition>\n\n        <ProjectComponent\n          pickProject={pickProject}\n          projects={projects}\n          map={map}\n        />\n        <Pins map={map} className=\"landmarks\" />\n        <Bttn className=\"about-bttn\" onClick={handleClick}>\n          About Landlines\n        </Bttn>\n      </div>\n    </>\n  );\n};\n\nexport default Map;\n"]},"metadata":{},"sourceType":"module"}