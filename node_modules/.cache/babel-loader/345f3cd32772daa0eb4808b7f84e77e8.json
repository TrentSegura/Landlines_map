{"ast":null,"code":"import e from \"@reach/portal\";\nimport n, { useRef as r, useDebugValue as t, useEffect as o, useLayoutEffect as i, useState as a, useCallback as c, useMemo as u, useImperativeHandle as s, forwardRef as l } from \"react\";\nimport { useMachine as d } from \"@xstate/react\";\nimport { useSpring as f, interpolate as m, animated as v, config as p } from \"react-spring\";\nimport { useDrag as y, rubberbandIfOutOfBounds as h } from \"react-use-gesture\";\nimport { createFocusTrap as g } from \"focus-trap\";\nimport { disableBodyScroll as S, enableBodyScroll as P } from \"body-scroll-lock\";\nimport { ResizeObserver as E } from \"@juggle/resize-observer\";\nimport { Machine as b, assign as R } from \"xstate\";\n\nfunction x() {\n  return (x = Object.assign || function (e) {\n    for (var n = 1; n < arguments.length; n++) {\n      var r = arguments[n];\n\n      for (var t in r) Object.prototype.hasOwnProperty.call(r, t) && (e[t] = r[t]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction O(e, n) {\n  if (null == e) return {};\n  var r,\n      t,\n      o = {},\n      i = Object.keys(e);\n\n  for (t = 0; t < i.length; t++) n.indexOf(r = i[t]) >= 0 || (o[r] = e[r]);\n\n  return o;\n}\n\nvar N = \"undefined\" != typeof window ? i : o;\n\nfunction C(e, n, r) {\n  return n = (n = +n) == n ? n : 0, r = (r = +r) == r ? r : 0, (e = +e) == e && (e = (e = e <= r ? e : r) >= n ? e : n), e;\n}\n\nfunction w(e) {\n  var n = Math.round(e);\n  if (Number.isNaN(e)) throw new TypeError(\"Found a NaN! Check your snapPoints / defaultSnap / snapTo \");\n  return n;\n}\n\nvar H = {\n  box: \"border-box\"\n};\n\nfunction k(e, n) {\n  var r = n.label,\n      o = n.enabled,\n      i = n.resizeSourceRef,\n      u = a(0),\n      s = u[0],\n      l = u[1];\n  t(r + \": \" + s);\n  var d = c(function (e) {\n    l(e[0].borderBoxSize[0].blockSize), i.current = \"element\";\n  }, [i]);\n  return N(function () {\n    if (e.current && o) {\n      var n = new E(d);\n      return n.observe(e.current, H), function () {\n        n.disconnect();\n      };\n    }\n  }, [e, d, o]), o ? s : 0;\n}\n\nfunction D(e) {\n  return void 0 === e && (e = 1e3), new Promise(function (n) {\n    return setTimeout(n, e);\n  });\n}\n\nvar j = {\n  DRAG: {\n    target: \"#overlay.dragging\",\n    actions: \"onOpenEnd\"\n  }\n},\n    z = {\n  RESIZE: {\n    target: \"#overlay.resizing\",\n    actions: \"onOpenEnd\"\n  }\n},\n    A = b({\n  id: \"overlay\",\n  initial: \"closed\",\n  context: {\n    initialState: \"CLOSED\"\n  },\n  states: {\n    closed: {\n      on: {\n        OPEN: \"opening\",\n        CLOSE: void 0\n      }\n    },\n    opening: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onOpenStart\",\n            onDone: \"transition\"\n          }\n        },\n        transition: {\n          always: [{\n            target: \"immediately\",\n            cond: \"initiallyOpen\"\n          }, {\n            target: \"smoothly\",\n            cond: \"initiallyClosed\"\n          }]\n        },\n        immediately: {\n          initial: \"open\",\n          states: {\n            open: {\n              invoke: {\n                src: \"openImmediately\",\n                onDone: \"activating\"\n              }\n            },\n            activating: {\n              invoke: {\n                src: \"activate\",\n                onDone: \"#overlay.opening.end\"\n              },\n              on: x({}, j, z)\n            }\n          }\n        },\n        smoothly: {\n          initial: \"visuallyHidden\",\n          states: {\n            visuallyHidden: {\n              invoke: {\n                src: \"renderVisuallyHidden\",\n                onDone: \"activating\"\n              }\n            },\n            activating: {\n              invoke: {\n                src: \"activate\",\n                onDone: \"open\"\n              }\n            },\n            open: {\n              invoke: {\n                src: \"openSmoothly\",\n                onDone: \"#overlay.opening.end\"\n              },\n              on: x({}, j, z)\n            }\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onOpenEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            CLOSE: \"#overlay.closing\",\n            DRAG: \"#overlay.dragging\"\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: x({}, {\n        CLOSE: {\n          target: \"#overlay.closing\",\n          actions: \"onOpenCancel\"\n        }\n      }),\n      onDone: \"open\"\n    },\n    open: {\n      on: {\n        DRAG: \"#overlay.dragging\",\n        SNAP: \"snapping\",\n        RESIZE: \"resizing\"\n      }\n    },\n    dragging: {\n      on: {\n        SNAP: \"snapping\"\n      }\n    },\n    snapping: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onSnapStart\",\n            onDone: \"snappingSmoothly\"\n          },\n          entry: [R({\n            y: function (e, n) {\n              return n.payload.y;\n            },\n            velocity: function (e, n) {\n              return n.payload.velocity;\n            },\n            snapSource: function (e, n) {\n              var r = n.payload.source;\n              return void 0 === r ? \"custom\" : r;\n            }\n          })]\n        },\n        snappingSmoothly: {\n          invoke: {\n            src: \"snapSmoothly\",\n            onDone: \"end\"\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onSnapEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            RESIZE: \"#overlay.resizing\",\n            SNAP: \"#overlay.snapping\",\n            CLOSE: \"#overlay.closing\",\n            DRAG: \"#overlay.dragging\"\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: {\n        SNAP: {\n          target: \"snapping\",\n          actions: \"onSnapEnd\"\n        },\n        RESIZE: {\n          target: \"#overlay.resizing\",\n          actions: \"onSnapCancel\"\n        },\n        DRAG: {\n          target: \"#overlay.dragging\",\n          actions: \"onSnapCancel\"\n        },\n        CLOSE: {\n          target: \"#overlay.closing\",\n          actions: \"onSnapCancel\"\n        }\n      },\n      onDone: \"open\"\n    },\n    resizing: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onResizeStart\",\n            onDone: \"resizingSmoothly\"\n          }\n        },\n        resizingSmoothly: {\n          invoke: {\n            src: \"resizeSmoothly\",\n            onDone: \"end\"\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onResizeEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            SNAP: \"#overlay.snapping\",\n            CLOSE: \"#overlay.closing\",\n            DRAG: \"#overlay.dragging\"\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: {\n        RESIZE: {\n          target: \"resizing\",\n          actions: \"onResizeEnd\"\n        },\n        SNAP: {\n          target: \"snapping\",\n          actions: \"onResizeCancel\"\n        },\n        DRAG: {\n          target: \"#overlay.dragging\",\n          actions: \"onResizeCancel\"\n        },\n        CLOSE: {\n          target: \"#overlay.closing\",\n          actions: \"onResizeCancel\"\n        }\n      },\n      onDone: \"open\"\n    },\n    closing: {\n      initial: \"start\",\n      states: {\n        start: {\n          invoke: {\n            src: \"onCloseStart\",\n            onDone: \"deactivating\"\n          },\n          on: {\n            OPEN: {\n              target: \"#overlay.open\",\n              actions: \"onCloseCancel\"\n            }\n          }\n        },\n        deactivating: {\n          invoke: {\n            src: \"deactivate\",\n            onDone: \"closingSmoothly\"\n          }\n        },\n        closingSmoothly: {\n          invoke: {\n            src: \"closeSmoothly\",\n            onDone: \"end\"\n          }\n        },\n        end: {\n          invoke: {\n            src: \"onCloseEnd\",\n            onDone: \"done\"\n          },\n          on: {\n            OPEN: {\n              target: \"#overlay.opening\",\n              actions: \"onCloseCancel\"\n            }\n          }\n        },\n        done: {\n          type: \"final\"\n        }\n      },\n      on: {\n        CLOSE: void 0,\n        OPEN: {\n          target: \"#overlay.opening\",\n          actions: \"onCloseCancel\"\n        }\n      },\n      onDone: \"closed\"\n    }\n  },\n  on: {\n    CLOSE: \"closing\"\n  }\n}, {\n  actions: {\n    onOpenCancel: function (e, n) {},\n    onSnapCancel: function (e, n) {},\n    onResizeCancel: function (e, n) {},\n    onCloseCancel: function (e, n) {},\n    onOpenEnd: function (e, n) {},\n    onSnapEnd: function (e, n) {},\n    onRezizeEnd: function (e, n) {}\n  },\n  services: {\n    onSnapStart: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onOpenStart: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onCloseStart: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onResizeStart: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onSnapEnd: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onOpenEnd: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onCloseEnd: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    onResizeEnd: function () {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    renderVisuallyHidden: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    activate: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    deactivate: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    openSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    openImmediately: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    snapSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    resizeSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    closeSmoothly: function (e, n) {\n      try {\n        return Promise.resolve(D()).then(function () {});\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }\n  },\n  guards: {\n    initiallyClosed: function (e) {\n      return \"CLOSED\" === e.initialState;\n    },\n    initiallyOpen: function (e) {\n      return \"OPEN\" === e.initialState;\n    }\n  }\n}),\n    L = p.default,\n    M = L.tension,\n    T = L.friction,\n    I = n.forwardRef(function (e, i) {\n  var l = e.children,\n      p = e.sibling,\n      E = e.className,\n      b = e.footer,\n      R = e.header,\n      H = e.open,\n      D = e.initialState,\n      j = e.lastSnapRef,\n      z = e.initialFocusRef,\n      L = e.onDismiss,\n      I = e.maxHeight,\n      B = e.defaultSnap,\n      V = void 0 === B ? F : B,\n      q = e.snapPoints,\n      K = void 0 === q ? Z : q,\n      J = e.blocking,\n      Q = void 0 === J || J,\n      U = e.scrollLocking,\n      W = void 0 === U || U,\n      X = e.style,\n      Y = e.onSpringStart,\n      $ = e.onSpringCancel,\n      _ = e.onSpringEnd,\n      ee = e.reserveScrollBarGap,\n      ne = void 0 === ee ? Q : ee,\n      re = O(e, [\"children\", \"sibling\", \"className\", \"footer\", \"header\", \"open\", \"initialState\", \"lastSnapRef\", \"initialFocusRef\", \"onDismiss\", \"maxHeight\", \"defaultSnap\", \"snapPoints\", \"blocking\", \"scrollLocking\", \"style\", \"onSpringStart\", \"onSpringCancel\", \"onSpringEnd\", \"reserveScrollBarGap\"]),\n      te = function () {\n    var e = a(!1),\n        n = e[0],\n        r = e[1],\n        t = a({}),\n        i = t[0],\n        u = t[1],\n        s = c(function (e) {\n      return u(function (n) {\n        var r;\n        return x({}, n, ((r = {})[e] = !1, r));\n      }), function () {\n        u(function (n) {\n          var r;\n          return x({}, n, ((r = {})[e] = !0, r));\n        });\n      };\n    }, []);\n    return o(function () {\n      var e = Object.values(i);\n      0 !== e.length && e.every(Boolean) && r(!0);\n    }, [i]), {\n      ready: n,\n      registerReady: s\n    };\n  }(),\n      oe = te.ready,\n      ie = te.registerReady,\n      ae = r(!1),\n      ce = r(Y),\n      ue = r($),\n      se = r(_);\n\n  o(function () {\n    ce.current = Y, ue.current = $, se.current = _;\n  }, [$, Y, _]);\n\n  var le,\n      de,\n      fe = f(function () {\n    return {\n      y: 0,\n      ready: 0,\n      maxHeight: 0,\n      minSnap: 0,\n      maxSnap: 0\n    };\n  }),\n      me = fe[0],\n      ve = fe[1],\n      pe = r(null),\n      ye = r(null),\n      he = r(null),\n      ge = r(null),\n      Se = r(null),\n      Pe = r(null),\n      Ee = r(0),\n      be = r(),\n      Re = (le = u(function () {\n    return \"undefined\" != typeof window ? window.matchMedia(\"(prefers-reduced-motion: reduce)\") : null;\n  }, []), de = r(null == le ? void 0 : le.matches), t(de.current ? \"reduce\" : \"no-preference\"), o(function () {\n    var e = function (e) {\n      de.current = e.matches;\n    };\n\n    return null == le || le.addListener(e), function () {\n      return null == le ? void 0 : le.removeListener(e);\n    };\n  }, [le]), de),\n      xe = function (e) {\n    var n = e.targetRef,\n        i = e.enabled,\n        a = e.reserveScrollBarGap,\n        c = r({\n      activate: function () {\n        throw new TypeError(\"Tried to activate scroll lock too early\");\n      },\n      deactivate: function () {}\n    });\n    return t(i ? \"Enabled\" : \"Disabled\"), o(function () {\n      if (!i) return c.current.deactivate(), void (c.current = {\n        activate: function () {},\n        deactivate: function () {}\n      });\n      var e = n.current,\n          r = !1;\n      c.current = {\n        activate: function () {\n          r || (r = !0, S(e, {\n            allowTouchMove: function (e) {\n              return e.closest(\"[data-body-scroll-lock-ignore]\");\n            },\n            reserveScrollBarGap: a\n          }));\n        },\n        deactivate: function () {\n          r && (r = !1, P(e));\n        }\n      };\n    }, [i, n, a]), c;\n  }({\n    targetRef: ye,\n    enabled: oe && W,\n    reserveScrollBarGap: ne\n  }),\n      Oe = function (e) {\n    var n = e.targetRef,\n        i = e.enabled,\n        a = r({\n      activate: function () {\n        throw new TypeError(\"Tried to activate aria hider too early\");\n      },\n      deactivate: function () {}\n    });\n    return t(i ? \"Enabled\" : \"Disabled\"), o(function () {\n      if (!i) return a.current.deactivate(), void (a.current = {\n        activate: function () {},\n        deactivate: function () {}\n      });\n      var e = n.current,\n          r = !1,\n          t = [],\n          o = [];\n      a.current = {\n        activate: function () {\n          if (!r) {\n            r = !0;\n            var n = e.parentNode;\n            document.querySelectorAll(\"body > *\").forEach(function (e) {\n              if (e !== n) {\n                var r = e.getAttribute(\"aria-hidden\");\n                null !== r && \"false\" !== r || (t.push(r), o.push(e), e.setAttribute(\"aria-hidden\", \"true\"));\n              }\n            });\n          }\n        },\n        deactivate: function () {\n          r && (r = !1, o.forEach(function (e, n) {\n            var r = t[n];\n            null === r ? e.removeAttribute(\"aria-hidden\") : e.setAttribute(\"aria-hidden\", r);\n          }), t = [], o = []);\n        }\n      };\n    }, [n, i]), a;\n  }({\n    targetRef: pe,\n    enabled: oe && Q\n  }),\n      Ne = function (e) {\n    var n = e.targetRef,\n        i = e.fallbackRef,\n        a = e.initialFocusRef,\n        c = e.enabled,\n        u = r({\n      activate: function () {\n        throw new TypeError(\"Tried to activate focus trap too early\");\n      },\n      deactivate: function () {}\n    });\n    return t(c ? \"Enabled\" : \"Disabled\"), o(function () {\n      if (!c) return u.current.deactivate(), void (u.current = {\n        activate: function () {},\n        deactivate: function () {}\n      });\n      var e = i.current,\n          r = g(n.current, {\n        onActivate: void 0,\n        initialFocus: a ? function () {\n          return (null == a ? void 0 : a.current) || e;\n        } : void 0,\n        fallbackFocus: e,\n        escapeDeactivates: !1,\n        clickOutsideDeactivates: !1\n      }),\n          t = !1;\n      u.current = {\n        activate: function () {\n          try {\n            return t ? Promise.resolve() : (t = !0, Promise.resolve(r.activate()).then(function () {\n              return Promise.resolve(new Promise(function (e) {\n                return setTimeout(function () {\n                  return e(void 0);\n                }, 0);\n              })).then(function () {});\n            }));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        },\n        deactivate: function () {\n          t && (t = !1, r.deactivate());\n        }\n      };\n    }, [c, i, a, n]), u;\n  }({\n    targetRef: pe,\n    fallbackRef: Pe,\n    initialFocusRef: z,\n    enabled: oe && Q\n  }),\n      Ce = function (e) {\n    var n = e.getSnapPoints,\n        i = e.heightRef,\n        c = e.lastSnapRef,\n        s = e.ready,\n        l = function (e) {\n      var n = e.contentRef,\n          i = e.controlledMaxHeight,\n          c = e.footerEnabled,\n          s = e.footerRef,\n          l = e.headerEnabled,\n          d = e.headerRef,\n          f = e.registerReady,\n          m = e.resizeSourceRef,\n          v = u(function () {\n        return f(\"contentHeight\");\n      }, [f]),\n          p = function (e, n, i) {\n        var c = u(function () {\n          return n(\"maxHeight\");\n        }, [n]),\n            s = a(function () {\n          return w(e) || \"undefined\" != typeof window ? window.innerHeight : 0;\n        }),\n            l = s[0],\n            d = s[1],\n            f = l > 0,\n            m = r(0);\n        return t(e ? \"controlled\" : \"auto\"), o(function () {\n          f && c();\n        }, [f, c]), N(function () {\n          if (e) return d(w(e)), void (i.current = \"maxheightprop\");\n\n          var n = function () {\n            m.current || (m.current = requestAnimationFrame(function () {\n              d(window.innerHeight), i.current = \"window\", m.current = 0;\n            }));\n          };\n\n          return window.addEventListener(\"resize\", n), d(window.innerHeight), i.current = \"window\", c(), function () {\n            window.removeEventListener(\"resize\", n), cancelAnimationFrame(m.current);\n          };\n        }, [e, c, i]), l;\n      }(i, f, m),\n          y = k(d, {\n        label: \"headerHeight\",\n        enabled: l,\n        resizeSourceRef: m\n      }),\n          h = k(n, {\n        label: \"contentHeight\",\n        enabled: !0,\n        resizeSourceRef: m\n      }),\n          g = k(s, {\n        label: \"footerHeight\",\n        enabled: c,\n        resizeSourceRef: m\n      }),\n          S = Math.min(p - y - g, h) + y + g;\n\n      t(\"minHeight: \" + S);\n      var P = h > 0;\n      return o(function () {\n        P && v();\n      }, [P, v]), {\n        maxHeight: p,\n        minHeight: S,\n        headerHeight: y,\n        footerHeight: g\n      };\n    }({\n      contentRef: e.contentRef,\n      controlledMaxHeight: e.controlledMaxHeight,\n      footerEnabled: e.footerEnabled,\n      footerRef: e.footerRef,\n      headerEnabled: e.headerEnabled,\n      headerRef: e.headerRef,\n      registerReady: e.registerReady,\n      resizeSourceRef: e.resizeSourceRef\n    }),\n        d = l.maxHeight,\n        f = l.minHeight,\n        m = l.headerHeight,\n        v = l.footerHeight,\n        p = function (e, n) {\n      var r = [].concat(e).map(w).reduce(function (e, r) {\n        return e.add(C(r, 0, n)), e;\n      }, new Set()),\n          t = Array.from(r),\n          o = Math.min.apply(Math, t);\n      if (Number.isNaN(o)) throw new TypeError(\"minSnap is NaN\");\n      var i = Math.max.apply(Math, t);\n      if (Number.isNaN(i)) throw new TypeError(\"maxSnap is NaN\");\n      return {\n        snapPoints: t,\n        minSnap: o,\n        maxSnap: i\n      };\n    }(s ? n({\n      height: i.current,\n      footerHeight: v,\n      headerHeight: m,\n      minHeight: f,\n      maxHeight: d\n    }) : [0], d),\n        y = p.snapPoints,\n        h = p.minSnap,\n        g = p.maxSnap;\n\n    return t(\"minSnap: \" + h + \", maxSnap:\" + g), {\n      minSnap: h,\n      maxSnap: g,\n      findSnap: function (e) {\n        var n = w(\"function\" == typeof e ? e({\n          footerHeight: v,\n          headerHeight: m,\n          height: i.current,\n          minHeight: f,\n          maxHeight: d,\n          snapPoints: y,\n          lastSnap: c.current\n        }) : e);\n        return y.reduce(function (e, r) {\n          return Math.abs(r - n) < Math.abs(e - n) ? r : e;\n        }, h);\n      },\n      maxHeight: d\n    };\n  }({\n    contentRef: he,\n    controlledMaxHeight: I,\n    footerEnabled: !!b,\n    footerRef: Se,\n    getSnapPoints: K,\n    headerEnabled: !1 !== R,\n    headerRef: ge,\n    heightRef: Ee,\n    lastSnapRef: j,\n    ready: oe,\n    registerReady: ie,\n    resizeSourceRef: be\n  }),\n      we = Ce.minSnap,\n      He = Ce.maxSnap,\n      ke = Ce.maxHeight,\n      De = Ce.findSnap,\n      je = r(ke),\n      ze = r(we),\n      Ae = r(He),\n      Le = r(De),\n      Me = r(0);\n\n  N(function () {\n    je.current = ke, Ae.current = He, ze.current = we, Le.current = De, Me.current = De(V);\n  }, [De, V, ke, He, we]);\n  var Te = c(function (e) {\n    var n = e.onRest,\n        r = e.config,\n        t = (r = void 0 === r ? {} : r).velocity,\n        o = void 0 === t ? 1 : t,\n        i = O(r, [\"velocity\"]),\n        a = O(e, [\"onRest\", \"config\"]);\n    return new Promise(function (e) {\n      return ve(x({}, a, {\n        config: x({\n          velocity: o\n        }, i, {\n          mass: 1,\n          tension: M,\n          friction: Math.max(T, T + (T - T * o))\n        }),\n        onRest: function () {\n          var r = [].slice.call(arguments);\n          e.apply(void 0, r), null == n || n.apply(void 0, r);\n        }\n      }));\n    });\n  }, [ve]),\n      Ie = d(A, {\n    devTools: !1,\n    actions: {\n      onOpenCancel: c(function () {\n        return null == ue.current ? void 0 : ue.current({\n          type: \"OPEN\"\n        });\n      }, []),\n      onSnapCancel: c(function (e) {\n        return null == ue.current ? void 0 : ue.current({\n          type: \"SNAP\",\n          source: e.snapSource\n        });\n      }, []),\n      onCloseCancel: c(function () {\n        return null == ue.current ? void 0 : ue.current({\n          type: \"CLOSE\"\n        });\n      }, []),\n      onResizeCancel: c(function () {\n        return null == ue.current ? void 0 : ue.current({\n          type: \"RESIZE\",\n          source: be.current\n        });\n      }, []),\n      onOpenEnd: c(function () {\n        return null == se.current ? void 0 : se.current({\n          type: \"OPEN\"\n        });\n      }, []),\n      onSnapEnd: c(function (e, n) {\n        return null == se.current ? void 0 : se.current({\n          type: \"SNAP\",\n          source: e.snapSource\n        });\n      }, []),\n      onResizeEnd: c(function () {\n        return null == se.current ? void 0 : se.current({\n          type: \"RESIZE\",\n          source: be.current\n        });\n      }, [])\n    },\n    context: {\n      initialState: D\n    },\n    services: {\n      onSnapStart: c(function (e, n) {\n        try {\n          return Promise.resolve(null == ce.current ? void 0 : ce.current({\n            type: \"SNAP\",\n            source: n.payload.source || \"custom\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onOpenStart: c(function () {\n        try {\n          return Promise.resolve(null == ce.current ? void 0 : ce.current({\n            type: \"OPEN\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onCloseStart: c(function () {\n        try {\n          return Promise.resolve(null == ce.current ? void 0 : ce.current({\n            type: \"CLOSE\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onResizeStart: c(function () {\n        try {\n          return Promise.resolve(null == ce.current ? void 0 : ce.current({\n            type: \"RESIZE\",\n            source: be.current\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onSnapEnd: c(function (e, n) {\n        try {\n          return Promise.resolve(null == se.current ? void 0 : se.current({\n            type: \"SNAP\",\n            source: e.snapSource\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onOpenEnd: c(function () {\n        try {\n          return Promise.resolve(null == se.current ? void 0 : se.current({\n            type: \"OPEN\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onCloseEnd: c(function () {\n        try {\n          return Promise.resolve(null == se.current ? void 0 : se.current({\n            type: \"CLOSE\"\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      onResizeEnd: c(function () {\n        try {\n          return Promise.resolve(null == se.current ? void 0 : se.current({\n            type: \"RESIZE\",\n            source: be.current\n          }));\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, []),\n      renderVisuallyHidden: c(function (e, n) {\n        try {\n          return Promise.resolve(Te({\n            y: Me.current,\n            ready: 0,\n            maxHeight: je.current,\n            maxSnap: Ae.current,\n            minSnap: Me.current,\n            immediate: !0\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Te]),\n      activate: c(function (e, n) {\n        try {\n          return ae.current = !0, Promise.resolve(Promise.all([xe.current.activate(), Ne.current.activate(), Oe.current.activate()])).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Oe, Ne, xe]),\n      deactivate: c(function () {\n        try {\n          return xe.current.deactivate(), Ne.current.deactivate(), Oe.current.deactivate(), ae.current = !1, Promise.resolve();\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Oe, Ne, xe]),\n      openImmediately: c(function () {\n        try {\n          return Ee.current = Me.current, Promise.resolve(Te({\n            y: Me.current,\n            ready: 1,\n            maxHeight: je.current,\n            maxSnap: Ae.current,\n            minSnap: Me.current,\n            immediate: !0\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Te]),\n      openSmoothly: c(function () {\n        try {\n          return Promise.resolve(Te({\n            y: 0,\n            ready: 1,\n            maxHeight: je.current,\n            maxSnap: Ae.current,\n            minSnap: Me.current,\n            immediate: !0\n          })).then(function () {\n            return Ee.current = Me.current, Promise.resolve(Te({\n              y: Me.current,\n              ready: 1,\n              maxHeight: je.current,\n              maxSnap: Ae.current,\n              minSnap: Me.current,\n              immediate: Re.current\n            })).then(function () {});\n          });\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Te, Re]),\n      snapSmoothly: c(function (e, n) {\n        try {\n          var r = Le.current(e.y);\n          return Ee.current = r, j.current = r, Promise.resolve(Te({\n            y: r,\n            ready: 1,\n            maxHeight: je.current,\n            maxSnap: Ae.current,\n            minSnap: ze.current,\n            immediate: Re.current,\n            config: {\n              velocity: e.velocity\n            }\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Te, j, Re]),\n      resizeSmoothly: c(function () {\n        try {\n          var e = Le.current(Ee.current);\n          return Ee.current = e, j.current = e, Promise.resolve(Te({\n            y: e,\n            ready: 1,\n            maxHeight: je.current,\n            maxSnap: Ae.current,\n            minSnap: ze.current,\n            immediate: \"element\" !== be.current || Re.current\n          })).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Te, j, Re]),\n      closeSmoothly: c(function (e, n) {\n        try {\n          return Te({\n            minSnap: Ee.current,\n            immediate: !0\n          }), Ee.current = 0, Promise.resolve(Te({\n            y: 0,\n            maxHeight: je.current,\n            maxSnap: Ae.current,\n            immediate: Re.current\n          })).then(function () {\n            return Promise.resolve(Te({\n              ready: 0,\n              immediate: !0\n            })).then(function () {});\n          });\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }, [Te, Re])\n    }\n  }),\n      Ge = Ie[0],\n      Fe = Ie[1];\n  o(function () {\n    oe && Fe(H ? \"OPEN\" : \"CLOSE\");\n  }, [H, Fe, oe]), N(function () {\n    (ke || He || we) && Fe(\"RESIZE\");\n  }, [ke, He, we, Fe]), o(function () {\n    return function () {\n      xe.current.deactivate(), Ne.current.deactivate(), Oe.current.deactivate();\n    };\n  }, [Oe, Ne, xe]), s(i, function () {\n    return {\n      snapTo: function (e, n) {\n        var r = void 0 === n ? {} : n,\n            t = r.velocity,\n            o = void 0 === t ? 1 : t,\n            i = r.source,\n            a = void 0 === i ? \"custom\" : i;\n        Fe(\"SNAP\", {\n          payload: {\n            y: Le.current(e),\n            velocity: o,\n            source: a\n          }\n        });\n      },\n\n      get height() {\n        return Ee.current;\n      }\n\n    };\n  }, [Fe]);\n  var Ze = y(function (e) {\n    var n = e.args,\n        r = (n = void 0 === n ? [] : n)[0],\n        t = (r = void 0 === r ? {} : r).closeOnTap,\n        o = void 0 !== t && t,\n        i = e.cancel,\n        a = e.direction[1],\n        c = e.down,\n        u = e.first,\n        s = e.last,\n        l = e.memo,\n        d = void 0 === l ? me.y.getValue() : l,\n        f = e.tap,\n        m = e.velocity,\n        v = -1 * e.movement[1];\n    if (!ae.current) return i(), d;\n    if (L && o && f) return i(), setTimeout(function () {\n      return L();\n    }, 0), d;\n    if (f) return d;\n    var p = d + v,\n        y = v * m,\n        g = Math.max(ze.current, Math.min(Ae.current, p + 2 * y));\n    if (!c && L && a > 0 && p + y < ze.current / 2) return i(), L(), d;\n    var S = c ? L || ze.current !== Ae.current ? h(p, L ? 0 : ze.current, Ae.current, .55) : p < ze.current ? h(p, ze.current, 2 * Ae.current, .55) : h(p, ze.current / 2, Ae.current, .55) : g;\n    return u && Fe(\"DRAG\"), s ? (Fe(\"SNAP\", {\n      payload: {\n        y: S,\n        velocity: m > .05 ? m : 1,\n        source: \"dragging\"\n      }\n    }), d) : (ve({\n      y: S,\n      ready: 1,\n      maxHeight: je.current,\n      maxSnap: Ae.current,\n      minSnap: ze.current,\n      immediate: !0,\n      config: {\n        velocity: m\n      }\n    }), d);\n  }, {\n    filterTaps: !0\n  });\n  if (Number.isNaN(Ae.current)) throw new TypeError(\"maxSnapRef is NaN!!\");\n  if (Number.isNaN(ze.current)) throw new TypeError(\"minSnapRef is NaN!!\");\n\n  var Be = function (e) {\n    var n,\n        r = e.spring,\n        t = m([r.y, r.maxHeight], function (e, n) {\n      return Math.round(C(n - e, 0, 16)) + \"px\";\n    }),\n        o = m([r.y, r.minSnap, r.maxSnap], function (e, n, r) {\n      return C(e, n, r) + \"px\";\n    }),\n        i = m([r.y, r.minSnap, r.maxSnap], function (e, n, r) {\n      return e < n ? n - e + \"px\" : e > r ? r - e + \"px\" : \"0px\";\n    }),\n        a = m([r.y, r.maxSnap], function (e, n) {\n      return e >= n ? Math.ceil(e - n) : 0;\n    }),\n        c = m([r.y, r.minSnap], function (e, n) {\n      if (!n) return 0;\n      var r = Math.max(n / 2 - 45, 0);\n      return C((e - r) * (1 / (Math.min(n / 2 + 45, n) - r) + 0), 0, 1);\n    }),\n        u = m([r.y, r.minSnap], function (e, n) {\n      return n ? C(e / n, 0, 1) : 0;\n    });\n    return (n = {})[\"--rsbs-content-opacity\"] = c, n[\"--rsbs-backdrop-opacity\"] = u, n[\"--rsbs-antigap-scale-y\"] = a, n[\"--rsbs-overlay-translate-y\"] = i, n[\"--rsbs-overlay-rounded\"] = t, n[\"--rsbs-overlay-h\"] = o, n;\n  }({\n    spring: me\n  });\n\n  return n.createElement(v.div, x({}, re, {\n    \"data-rsbs-root\": !0,\n    \"data-rsbs-state\": G.find(Ge.matches),\n    \"data-rsbs-is-blocking\": Q,\n    \"data-rsbs-is-dismissable\": !!L,\n    \"data-rsbs-has-header\": !!R,\n    \"data-rsbs-has-footer\": !!b,\n    className: E,\n    ref: pe,\n    style: x({}, Be, X, {\n      opacity: me.ready\n    })\n  }), p, Q && n.createElement(\"div\", x({\n    key: \"backdrop\",\n    \"data-rsbs-backdrop\": !0\n  }, Ze({\n    closeOnTap: !0\n  }))), n.createElement(\"div\", {\n    key: \"overlay\",\n    \"aria-modal\": \"true\",\n    role: \"dialog\",\n    \"data-rsbs-overlay\": !0,\n    tabIndex: -1,\n    ref: Pe,\n    onKeyDown: function (e) {\n      \"Escape\" === e.key && (e.stopPropagation(), L && L());\n    }\n  }, !1 !== R && n.createElement(\"div\", x({\n    key: \"header\",\n    \"data-rsbs-header\": !0,\n    ref: ge\n  }, Ze()), R), n.createElement(\"div\", {\n    key: \"scroll\",\n    \"data-rsbs-scroll\": !0,\n    ref: ye\n  }, n.createElement(\"div\", {\n    \"data-rsbs-content\": !0,\n    ref: he\n  }, l)), b && n.createElement(\"div\", x({\n    key: \"footer\",\n    ref: Se,\n    \"data-rsbs-footer\": !0\n  }, Ze()), b)));\n}),\n    G = [\"closed\", \"opening\", \"open\", \"closing\", \"dragging\", \"snapping\", \"resizing\"];\n\nfunction F(e) {\n  var n = e.lastSnap;\n  return null != n ? n : Math.min.apply(Math, e.snapPoints);\n}\n\nfunction Z(e) {\n  return e.minHeight;\n}\n\nvar B = l(function (t, o) {\n  var i = t.onSpringStart,\n      u = t.onSpringEnd,\n      s = t.skipInitialTransition,\n      l = O(t, [\"onSpringStart\", \"onSpringEnd\", \"skipInitialTransition\"]),\n      d = a(!1),\n      f = d[0],\n      m = d[1],\n      v = r(),\n      p = r(null),\n      y = r(s && l.open ? \"OPEN\" : \"CLOSED\");\n  N(function () {\n    if (l.open) return cancelAnimationFrame(v.current), m(!0), function () {\n      y.current = \"CLOSED\";\n    };\n  }, [l.open]);\n  var h = c(function (e) {\n    try {\n      return Promise.resolve(null == i ? void 0 : i(e)).then(function () {\n        \"OPEN\" === e.type && cancelAnimationFrame(v.current);\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, [i]),\n      g = c(function (e) {\n    try {\n      return Promise.resolve(null == u ? void 0 : u(e)).then(function () {\n        \"CLOSE\" === e.type && (v.current = requestAnimationFrame(function () {\n          return m(!1);\n        }));\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, [u]);\n  return f ? n.createElement(e, {\n    \"data-rsbs-portal\": !0\n  }, n.createElement(I, x({}, l, {\n    lastSnapRef: p,\n    ref: o,\n    initialState: y.current,\n    onSpringStart: h,\n    onSpringEnd: g\n  }))) : null;\n});\nexport { B as BottomSheet };","map":{"version":3,"sources":["../src/hooks/useLayoutEffect.tsx","../src/utils.ts","../src/hooks/useSnapPoints.tsx","../src/machines/overlay.ts","../src/BottomSheet.tsx","../src/hooks/useReady.tsx","../src/hooks/useReducedMotion.tsx","../src/hooks/useSpring.tsx","../src/hooks/useScrollLock.tsx","../src/hooks/useAriaHider.tsx","../src/hooks/useFocusTrap.tsx","../src/hooks/useSpringInterpolations.tsx","../src/index.tsx"],"names":["useLayoutEffect","window","useLayoutEffectSafely","useEffect","clamp","number","lower","upper","roundAndCheckForNaN","unrounded","rounded","Math","round","Number","isNaN","TypeError","unsafeSnaps","maxHeight","concat","map","snapPointsDedupedSet","reduce","acc","snapPoint","add","Set","snapPoints","Array","from","minSnap","min","maxSnap","max","contentRef","controlledMaxHeight","footerEnabled","footerRef","getSnapPoints","headerEnabled","headerRef","heightRef","lastSnapRef","ready","registerReady","resizeSourceRef","minHeight","headerHeight","footerHeight","useDimensions","processSnapPoints","height","current","numberOrCallback","lastSnap","querySnap","prev","curr","abs","useDebugValue","findSnap","setReady","useMemo","useMaxHeight","useElementSizeObserver","label","enabled","contentHeight","observerOptions","box","ref","size","setSize","useState","handleResize","useCallback","entries","borderBoxSize","blockSize","resizeObserver","ResizeObserver","observe","disconnect","setMaxHeight","innerHeight","raf","useRef","requestAnimationFrame","addEventListener","removeEventListener","cancelAnimationFrame","sleep","ms","Promise","resolve","setTimeout","CLOSE","target","actions","openToDrag","DRAG","openToResize","RESIZE","initialState","overlayMachine","Machine","id","initial","context","states","closed","on","OPEN","undefined","opening","start","invoke","src","onDone","transition","always","cond","immediately","open","activating","smoothly","visuallyHidden","end","done","type","SNAP","dragging","snapping","entry","assign","y","_","payload","velocity","snapSource","source","snappingSmoothly","resizing","resizingSmoothly","closing","deactivating","closingSmoothly","onOpenCancel","event","onSnapCancel","onResizeCancel","onCloseCancel","onOpenEnd","onSnapEnd","onRezizeEnd","services","onSnapStart","onOpenStart","onCloseStart","onResizeStart","onCloseEnd","onResizeEnd","renderVisuallyHidden","activate","deactivate","openSmoothly","openImmediately","snapSmoothly","resizeSmoothly","closeSmoothly","guards","initiallyClosed","initiallyOpen","tension","friction","config","default","BottomSheet","React","forwardRef","children","sibling","className","footer","header","_open","initialFocusRef","onDismiss","defaultSnap","getDefaultSnap","_defaultSnap","_snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","props","useReady","canDragRef","onSpringStartRef","onSpringCancelRef","onSpringEndRef","spring","set","containerRef","scrollRef","overlayRef","prefersReducedMotion","scrollLockRef","useScrollLock","targetRef","ariaHiderRef","useAriaHider","focusTrapRef","useFocusTrap","fallbackRef","useSnapPoints","maxHeightRef","minSnapRef","maxSnapRef","findSnapRef","defaultSnapRef","asyncSet","onRest","opts","mass","args","send","useMachine","devTools","immediate","all","snap","useImperativeHandle","snapTo","closeOnTap","cancel","direction","down","first","last","memo","getValue","movement","tap","my","rawY","predictedDistance","predictedY","newY","rubberbandIfOutOfBounds","bind","useDrag","filterTaps","interpolations","useSpringInterpolations","animated","div","data-rsbs-root","data-rsbs-state","publicStates","find","matches","data-rsbs-is-blocking","data-rsbs-is-dismissable","data-rsbs-has-header","data-rsbs-has-footer","opacity","key","data-rsbs-backdrop","aria-modal","role","data-rsbs-overlay","tabIndex","onKeyDown","stopPropagation","data-rsbs-header","data-rsbs-scroll","data-rsbs-content","data-rsbs-footer","readyMap","updateReadyMap","Object","values","length","every","Boolean","mql","matchMedia","handler","addListener","removeListener","useReactSpring","active","disableBodyScroll","allowTouchMove","el","closest","enableBodyScroll","originalValues","rootNodes","parentNode","document","querySelectorAll","forEach","node","attr","getAttribute","push","setAttribute","index","originalValue","removeAttribute","fallback","trap","createFocusTrap","onActivate","initialFocus","fallbackFocus","escapeDeactivates","clickOutsideDeactivates","interpolateBorderRadius","interpolate","interpolateHeight","interpolateY","interpolateFiller","ceil","interpolateContentOpacity","minX","interpolateBackdrop","skipInitialTransition","mounted","setMounted","timerRef","initialStateRef","handleSpringStart","handleSpringEnd","Portal","data-rsbs-portal","_BottomSheet"],"mappings":"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","sourcesContent":["import { useEffect, useLayoutEffect as useLayoutEffectSafely } from 'react'\n\n// Ensure the name used in components is useLayoutEffect so the eslint react hooks plugin works\nexport const useLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffectSafely : useEffect\n","/* eslint-disable no-self-compare */\n\n// stolen from lodash\nexport function clamp(number: number, lower: number, upper: number) {\n  number = +number\n  lower = +lower\n  upper = +upper\n  lower = lower === lower ? lower : 0\n  upper = upper === upper ? upper : 0\n  if (number === number) {\n    number = number <= upper ? number : upper\n    number = number >= lower ? number : lower\n  }\n  return number\n}\n\n// Mwahaha easiest way to filter out NaN I ever saw! >:3\nexport function deleteNaN(arr) {\n  const set = new Set(arr)\n  set.delete(NaN)\n  return [...set]\n}\n\nexport function roundAndCheckForNaN(unrounded) {\n  const rounded = Math.round(unrounded)\n  if (Number.isNaN(unrounded)) {\n    throw new TypeError(\n      'Found a NaN! Check your snapPoints / defaultSnap / snapTo '\n    )\n  }\n\n  return rounded\n}\n\n// Validate, sanitize, round and dedupe snap points, as well as extracting the minSnap and maxSnap points\nexport function processSnapPoints(unsafeSnaps: number | number[], maxHeight) {\n  const safeSnaps = [].concat(unsafeSnaps).map(roundAndCheckForNaN)\n\n  const snapPointsDedupedSet = safeSnaps.reduce((acc, snapPoint) => {\n    acc.add(clamp(snapPoint, 0, maxHeight))\n    return acc\n  }, new Set<number>())\n\n  const snapPoints = Array.from(snapPointsDedupedSet)\n\n  const minSnap = Math.min(...snapPoints)\n  if (Number.isNaN(minSnap)) {\n    throw new TypeError('minSnap is NaN')\n  }\n  const maxSnap = Math.max(...snapPoints)\n  if (Number.isNaN(maxSnap)) {\n    throw new TypeError('maxSnap is NaN')\n  }\n\n  return {\n    snapPoints,\n    minSnap,\n    maxSnap,\n  }\n}\n\nexport const debugging =\n  process.env.NODE_ENV === 'development' && typeof window !== 'undefined'\n    ? window.location.search === '?debug'\n    : false\n","import React, {\n  useCallback,\n  useDebugValue,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport { ResizeObserver, ResizeObserverEntry } from '@juggle/resize-observer'\nimport type { defaultSnapProps, ResizeSource, snapPoints } from '../types'\nimport { processSnapPoints, roundAndCheckForNaN } from '../utils'\nimport { useReady } from './useReady'\nimport { ResizeObserverOptions } from '@juggle/resize-observer/lib/ResizeObserverOptions'\nimport { useLayoutEffect } from './useLayoutEffect'\n\nexport function useSnapPoints({\n  contentRef,\n  controlledMaxHeight,\n  footerEnabled,\n  footerRef,\n  getSnapPoints,\n  headerEnabled,\n  headerRef,\n  heightRef,\n  lastSnapRef,\n  ready,\n  registerReady,\n  resizeSourceRef,\n}: {\n  contentRef: React.RefObject<Element>\n  controlledMaxHeight?: number\n  footerEnabled: boolean\n  footerRef: React.RefObject<Element>\n  getSnapPoints: snapPoints\n  headerEnabled: boolean\n  headerRef: React.RefObject<Element>\n  heightRef: React.RefObject<number>\n  lastSnapRef: React.RefObject<number>\n  ready: boolean\n  registerReady: ReturnType<typeof useReady>['registerReady']\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n}) {\n  const { maxHeight, minHeight, headerHeight, footerHeight } = useDimensions({\n    contentRef: contentRef,\n    controlledMaxHeight,\n    footerEnabled,\n    footerRef,\n    headerEnabled,\n    headerRef,\n    registerReady,\n    resizeSourceRef,\n  })\n\n  const { snapPoints, minSnap, maxSnap } = processSnapPoints(\n    ready\n      ? getSnapPoints({\n          height: heightRef.current,\n          footerHeight,\n          headerHeight,\n          minHeight,\n          maxHeight,\n        })\n      : [0],\n    maxHeight\n  )\n  //console.log({ snapPoints, minSnap, maxSnap })\n\n  // @TODO investigate the gains from memoizing this\n  function findSnap(\n    numberOrCallback: number | ((state: defaultSnapProps) => number)\n  ) {\n    let unsafeSearch: number\n    if (typeof numberOrCallback === 'function') {\n      unsafeSearch = numberOrCallback({\n        footerHeight,\n        headerHeight,\n        height: heightRef.current,\n        minHeight,\n        maxHeight,\n        snapPoints,\n        lastSnap: lastSnapRef.current,\n      })\n    } else {\n      unsafeSearch = numberOrCallback\n    }\n    const querySnap = roundAndCheckForNaN(unsafeSearch)\n    return snapPoints.reduce(\n      (prev, curr) =>\n        Math.abs(curr - querySnap) < Math.abs(prev - querySnap) ? curr : prev,\n      minSnap\n    )\n  }\n\n  useDebugValue(`minSnap: ${minSnap}, maxSnap:${maxSnap}`)\n\n  return { minSnap, maxSnap, findSnap, maxHeight }\n}\n\nfunction useDimensions({\n  contentRef,\n  controlledMaxHeight,\n  footerEnabled,\n  footerRef,\n  headerEnabled,\n  headerRef,\n  registerReady,\n  resizeSourceRef,\n}: {\n  contentRef: React.RefObject<Element>\n  controlledMaxHeight?: number\n  footerEnabled: boolean\n  footerRef: React.RefObject<Element>\n  headerEnabled: boolean\n  headerRef: React.RefObject<Element>\n  registerReady: ReturnType<typeof useReady>['registerReady']\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n}) {\n  const setReady = useMemo(() => registerReady('contentHeight'), [\n    registerReady,\n  ])\n  const maxHeight = useMaxHeight(\n    controlledMaxHeight,\n    registerReady,\n    resizeSourceRef\n  )\n\n  // @TODO probably better to forward props instead of checking refs to decide if it's enabled\n  const headerHeight = useElementSizeObserver(headerRef, {\n    label: 'headerHeight',\n    enabled: headerEnabled,\n    resizeSourceRef,\n  })\n  const contentHeight = useElementSizeObserver(contentRef, {\n    label: 'contentHeight',\n    enabled: true,\n    resizeSourceRef,\n  })\n  const footerHeight = useElementSizeObserver(footerRef, {\n    label: 'footerHeight',\n    enabled: footerEnabled,\n    resizeSourceRef,\n  })\n  const minHeight =\n    Math.min(maxHeight - headerHeight - footerHeight, contentHeight) +\n    headerHeight +\n    footerHeight\n\n  useDebugValue(`minHeight: ${minHeight}`)\n\n  const ready = contentHeight > 0\n  useEffect(() => {\n    if (ready) {\n      setReady()\n    }\n  }, [ready, setReady])\n\n  return {\n    maxHeight,\n    minHeight,\n    headerHeight,\n    footerHeight,\n  }\n}\n\nconst observerOptions: ResizeObserverOptions = {\n  // Respond to changes to padding, happens often on iOS when using env(safe-area-inset-bottom)\n  // And the user hides or shows the Safari browser toolbar\n  box: 'border-box',\n}\n/**\n * Hook for determining the size of an element using the Resize Observer API.\n *\n * @param ref - A React ref to an element\n */\nfunction useElementSizeObserver(\n  ref: React.RefObject<Element>,\n  {\n    label,\n    enabled,\n    resizeSourceRef,\n  }: {\n    label: string\n    enabled: boolean\n    resizeSourceRef: React.MutableRefObject<ResizeSource>\n  }\n): number {\n  let [size, setSize] = useState(0)\n\n  useDebugValue(`${label}: ${size}`)\n\n  const handleResize = useCallback(\n    (entries: ResizeObserverEntry[]) => {\n      // we only observe one element, so accessing the first entry here is fine\n      setSize(entries[0].borderBoxSize[0].blockSize)\n      resizeSourceRef.current = 'element'\n    },\n    [resizeSourceRef]\n  )\n\n  useLayoutEffect(() => {\n    if (!ref.current || !enabled) {\n      return\n    }\n\n    const resizeObserver = new ResizeObserver(handleResize)\n    resizeObserver.observe(ref.current, observerOptions)\n\n    return () => {\n      resizeObserver.disconnect()\n    }\n  }, [ref, handleResize, enabled])\n\n  return enabled ? size : 0\n}\n\n// Blazingly keep track of the current viewport height without blocking the thread, keeping that sweet 60fps on smartphones\nfunction useMaxHeight(\n  controlledMaxHeight,\n  registerReady: ReturnType<typeof useReady>['registerReady'],\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n) {\n  const setReady = useMemo(() => registerReady('maxHeight'), [registerReady])\n  const [maxHeight, setMaxHeight] = useState(() =>\n    roundAndCheckForNaN(controlledMaxHeight) || typeof window !== 'undefined'\n      ? window.innerHeight\n      : 0\n  )\n  const ready = maxHeight > 0\n  const raf = useRef(0)\n\n  useDebugValue(controlledMaxHeight ? 'controlled' : 'auto')\n\n  useEffect(() => {\n    if (ready) {\n      setReady()\n    }\n  }, [ready, setReady])\n\n  useLayoutEffect(() => {\n    // Bail if the max height is a controlled prop\n    if (controlledMaxHeight) {\n      setMaxHeight(roundAndCheckForNaN(controlledMaxHeight))\n      resizeSourceRef.current = 'maxheightprop'\n\n      return\n    }\n\n    const handleResize = () => {\n      if (raf.current) {\n        // bail to throttle the amount of resize changes\n        return\n      }\n\n      // throttle state changes using rAF\n      raf.current = requestAnimationFrame(() => {\n        setMaxHeight(window.innerHeight)\n        resizeSourceRef.current = 'window'\n\n        raf.current = 0\n      })\n    }\n    window.addEventListener('resize', handleResize)\n    setMaxHeight(window.innerHeight)\n    resizeSourceRef.current = 'window'\n    setReady()\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n      cancelAnimationFrame(raf.current)\n    }\n  }, [controlledMaxHeight, setReady, resizeSourceRef])\n\n  return maxHeight\n}\n","import { Machine, assign } from 'xstate'\n\n// This is the root machine, composing all the other machines and is the brain of the bottom sheet\n\ninterface OverlayStateSchema {\n  states: {\n    // the overlay usually starts in the closed position\n    closed: {}\n    opening: {\n      states: {\n        // Used to fire off the springStart event\n        start: {}\n        // Decide how to transition to the open state based on what the initialState is\n        transition: {}\n        // Fast enter animation, sheet is open by default\n        immediately: {\n          states: {\n            open: {}\n            activating: {}\n          }\n        }\n        smoothly: {\n          states: {\n            // This state only happens when the overlay should start in an open state, instead of animating from the bottom\n            // openImmediately: {}\n            // visuallyHidden will render the overlay in the open state, but with opacity 0\n            // doing this solves two problems:\n            // on Android focusing an input element will trigger the softkeyboard to show up, which will change the viewport height\n            // on iOS the focus event will break the view by triggering a scrollIntoView event if focus happens while the overlay is below the viewport and body got overflow:hidden\n            // by rendering things with opacity 0 we ensure keyboards and scrollIntoView all happen in a way that match up with what the sheet will look like.\n            // we can then move it to the opening position below the viewport, and animate it into view without worrying about height changes or scrolling overflow:hidden events\n            visuallyHidden: {}\n            // In this state we're activating focus traps, scroll locks and more, this will sometimes trigger soft keyboards and scrollIntoView\n            // @TODO we might want to add a delay here before proceeding to open, to give android and iOS enough time to adjust the viewport when focusing an interactive element\n            activating: {}\n            // Animates from the bottom\n            open: {}\n          }\n        }\n        // Used to fire off the springEnd event\n        end: {}\n        // And finally we're ready to transition to open\n        done: {}\n      }\n    }\n    open: {}\n    // dragging responds to user gestures, which may interrupt the opening state, closing state or snapping\n    // when interrupting an opening event, it fires onSpringEnd(OPEN) before onSpringStart(DRAG)\n    // when interrupting a closing event, it fires onSpringCancel(CLOSE) before onSpringStart(DRAG)\n    // when interrupting a dragging event, it fires onSpringCancel(SNAP) before onSpringStart(DRAG)\n    dragging: {}\n    // snapping happens whenever transitioning to a new snap point, often after dragging\n    snapping: {\n      states: {\n        start: {}\n        snappingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n    resizing: {\n      states: {\n        start: {}\n        resizingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n    closing: {\n      states: {\n        start: {}\n        deactivating: {}\n        closingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n  }\n}\n\ntype OverlayEvent =\n  | { type: 'OPEN' }\n  | {\n      type: 'SNAP'\n      payload: {\n        y: number\n        velocity: number\n        source: 'dragging' | 'custom' | string\n      }\n    }\n  | { type: 'CLOSE' }\n  | { type: 'DRAG' }\n  | { type: 'RESIZE' }\n\n// The context (extended state) of the machine\ninterface OverlayContext {\n  initialState: 'OPEN' | 'CLOSED'\n}\nfunction sleep(ms = 1000) {\n  return new Promise((resolve) => setTimeout(resolve, ms))\n}\n\nconst cancelOpen = {\n  CLOSE: { target: '#overlay.closing', actions: 'onOpenCancel' },\n}\nconst openToDrag = {\n  DRAG: { target: '#overlay.dragging', actions: 'onOpenEnd' },\n}\nconst openToResize = {\n  RESIZE: { target: '#overlay.resizing', actions: 'onOpenEnd' },\n}\n\nconst initiallyOpen = ({ initialState }) => initialState === 'OPEN'\nconst initiallyClosed = ({ initialState }) => initialState === 'CLOSED'\n\n// Copy paste the machine into https://xstate.js.org/viz/ to make sense of what's going on in here ;)\n\nexport const overlayMachine = Machine<\n  OverlayContext,\n  OverlayStateSchema,\n  OverlayEvent\n>(\n  {\n    id: 'overlay',\n    initial: 'closed',\n    context: { initialState: 'CLOSED' },\n    states: {\n      closed: { on: { OPEN: 'opening', CLOSE: undefined } },\n      opening: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onOpenStart',\n              onDone: 'transition',\n            },\n          },\n          transition: {\n            always: [\n              { target: 'immediately', cond: 'initiallyOpen' },\n              { target: 'smoothly', cond: 'initiallyClosed' },\n            ],\n          },\n          immediately: {\n            initial: 'open',\n            states: {\n              open: {\n                invoke: { src: 'openImmediately', onDone: 'activating' },\n              },\n              activating: {\n                invoke: { src: 'activate', onDone: '#overlay.opening.end' },\n                on: { ...openToDrag, ...openToResize },\n              },\n            },\n          },\n          smoothly: {\n            initial: 'visuallyHidden',\n            states: {\n              visuallyHidden: {\n                invoke: { src: 'renderVisuallyHidden', onDone: 'activating' },\n              },\n              activating: {\n                invoke: { src: 'activate', onDone: 'open' },\n              },\n              open: {\n                invoke: { src: 'openSmoothly', onDone: '#overlay.opening.end' },\n                on: { ...openToDrag, ...openToResize },\n              },\n            },\n          },\n          end: {\n            invoke: { src: 'onOpenEnd', onDone: 'done' },\n            on: { CLOSE: '#overlay.closing', DRAG: '#overlay.dragging' },\n          },\n          done: {\n            type: 'final',\n          },\n        },\n        on: { ...cancelOpen },\n        onDone: 'open',\n      },\n      open: {\n        on: { DRAG: '#overlay.dragging', SNAP: 'snapping', RESIZE: 'resizing' },\n      },\n      dragging: {\n        on: { SNAP: 'snapping' },\n      },\n      snapping: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onSnapStart',\n              onDone: 'snappingSmoothly',\n            },\n            entry: [\n              assign({\n                // @ts-expect-error\n                y: (_, { payload: { y } }) => y,\n                velocity: (_, { payload: { velocity } }) => velocity,\n                snapSource: (_, { payload: { source = 'custom' } }) => source,\n              }),\n            ],\n          },\n          snappingSmoothly: {\n            invoke: { src: 'snapSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onSnapEnd', onDone: 'done' },\n            on: {\n              RESIZE: '#overlay.resizing',\n              SNAP: '#overlay.snapping',\n              CLOSE: '#overlay.closing',\n              DRAG: '#overlay.dragging',\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          SNAP: { target: 'snapping', actions: 'onSnapEnd' },\n          RESIZE: { target: '#overlay.resizing', actions: 'onSnapCancel' },\n          DRAG: { target: '#overlay.dragging', actions: 'onSnapCancel' },\n          CLOSE: { target: '#overlay.closing', actions: 'onSnapCancel' },\n        },\n        onDone: 'open',\n      },\n      resizing: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onResizeStart',\n              onDone: 'resizingSmoothly',\n            },\n          },\n          resizingSmoothly: {\n            invoke: { src: 'resizeSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onResizeEnd', onDone: 'done' },\n            on: {\n              SNAP: '#overlay.snapping',\n              CLOSE: '#overlay.closing',\n              DRAG: '#overlay.dragging',\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          RESIZE: { target: 'resizing', actions: 'onResizeEnd' },\n          SNAP: { target: 'snapping', actions: 'onResizeCancel' },\n          DRAG: { target: '#overlay.dragging', actions: 'onResizeCancel' },\n          CLOSE: { target: '#overlay.closing', actions: 'onResizeCancel' },\n        },\n        onDone: 'open',\n      },\n      closing: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onCloseStart',\n              onDone: 'deactivating',\n            },\n            on: { OPEN: { target: '#overlay.open', actions: 'onCloseCancel' } },\n          },\n          deactivating: {\n            invoke: { src: 'deactivate', onDone: 'closingSmoothly' },\n          },\n          closingSmoothly: {\n            invoke: { src: 'closeSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onCloseEnd', onDone: 'done' },\n            on: {\n              OPEN: { target: '#overlay.opening', actions: 'onCloseCancel' },\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          CLOSE: undefined,\n          OPEN: { target: '#overlay.opening', actions: 'onCloseCancel' },\n        },\n        onDone: 'closed',\n      },\n    },\n    on: {\n      CLOSE: 'closing',\n    },\n  },\n  {\n    actions: {\n      onOpenCancel: (context, event) => {\n        console.log('onOpenCancel', { context, event })\n      },\n      onSnapCancel: (context, event) => {\n        console.log('onSnapCancel', { context, event })\n      },\n      onResizeCancel: (context, event) => {\n        console.log('onResizeCancel', { context, event })\n      },\n      onCloseCancel: (context, event) => {\n        console.log('onCloseCancel', { context, event })\n      },\n      onOpenEnd: (context, event) => {\n        console.log('onOpenCancel', { context, event })\n      },\n      onSnapEnd: (context, event) => {\n        console.log('onSnapEnd', { context, event })\n      },\n      onRezizeEnd: (context, event) => {\n        console.log('onRezizeEnd', { context, event })\n      },\n    },\n    services: {\n      onSnapStart: async () => {\n        await sleep()\n      },\n      onOpenStart: async () => {\n        await sleep()\n      },\n      onCloseStart: async () => {\n        await sleep()\n      },\n      onResizeStart: async () => {\n        await sleep()\n      },\n      onSnapEnd: async () => {\n        await sleep()\n      },\n      onOpenEnd: async () => {\n        await sleep()\n      },\n      onCloseEnd: async () => {\n        await sleep()\n      },\n      onResizeEnd: async () => {\n        await sleep()\n      },\n      renderVisuallyHidden: async (context, event) => {\n        console.group('renderVisuallyHidden')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      activate: async (context, event) => {\n        console.group('activate')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      deactivate: async (context, event) => {\n        console.group('deactivate')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      openSmoothly: async (context, event) => {\n        console.group('openSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      openImmediately: async (context, event) => {\n        console.group('openImmediately')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      snapSmoothly: async (context, event) => {\n        console.group('snapSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      resizeSmoothly: async (context, event) => {\n        console.group('resizeSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      closeSmoothly: async (context, event) => {\n        console.group('closeSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n    },\n    guards: { initiallyClosed, initiallyOpen },\n  }\n)\n","//\n// In order to greatly reduce complexity this component is designed to always transition to open on mount, and then\n// transition to a closed state later. This ensures that all memory used to keep track of animation and gesture state\n// can be reclaimed after the sheet is closed and then unmounted.\n// It also ensures that when transitioning to open on mount the state is always clean, not affected by previous states that could\n// cause race conditions.\n\nimport { useMachine } from '@xstate/react'\nimport React, {\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n} from 'react'\nimport { animated, config } from 'react-spring'\nimport { rubberbandIfOutOfBounds, useDrag } from 'react-use-gesture'\nimport {\n  useAriaHider,\n  useFocusTrap,\n  useLayoutEffect,\n  useReady,\n  useReducedMotion,\n  useScrollLock,\n  useSnapPoints,\n  useSpring,\n  useSpringInterpolations,\n} from './hooks'\nimport { overlayMachine } from './machines/overlay'\nimport type {\n  defaultSnapProps,\n  Props,\n  RefHandles,\n  ResizeSource,\n  SnapPointProps,\n} from './types'\nimport { debugging } from './utils'\n\nconst { tension, friction } = config.default\n\n// @TODO implement AbortController to deal with race conditions\n\n// @TODO rename to SpringBottomSheet and allow userland to import it directly, for those who want maximum control and minimal bundlesize\nexport const BottomSheet = React.forwardRef<\n  RefHandles,\n  {\n    initialState: 'OPEN' | 'CLOSED'\n    lastSnapRef: React.MutableRefObject<number | null>\n  } & Props\n>(function BottomSheetInternal(\n  {\n    children,\n    sibling,\n    className,\n    footer,\n    header,\n    open: _open,\n    initialState,\n    lastSnapRef,\n    initialFocusRef,\n    onDismiss,\n    maxHeight: controlledMaxHeight,\n    defaultSnap: getDefaultSnap = _defaultSnap,\n    snapPoints: getSnapPoints = _snapPoints,\n    blocking = true,\n    scrollLocking = true,\n    style,\n    onSpringStart,\n    onSpringCancel,\n    onSpringEnd,\n    reserveScrollBarGap = blocking,\n    ...props\n  },\n  forwardRef\n) {\n  // Before any animations can start we need to measure a few things, like the viewport and the dimensions of content, and header + footer if they exist\n  // @TODO make ready its own state perhaps, before open or closed\n  const { ready, registerReady } = useReady()\n\n  // Controls the drag handler, used by spring operations that happen outside the render loop in React\n  const canDragRef = useRef(false)\n\n  // This way apps don't have to remember to wrap their callbacks in useCallback to avoid breaking the sheet\n  const onSpringStartRef = useRef(onSpringStart)\n  const onSpringCancelRef = useRef(onSpringCancel)\n  const onSpringEndRef = useRef(onSpringEnd)\n  useEffect(() => {\n    onSpringStartRef.current = onSpringStart\n    onSpringCancelRef.current = onSpringCancel\n    onSpringEndRef.current = onSpringEnd\n  }, [onSpringCancel, onSpringStart, onSpringEnd])\n\n  // Behold, the engine of it all!\n  const [spring, set] = useSpring()\n\n  const containerRef = useRef<HTMLDivElement>(null)\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const contentRef = useRef<HTMLDivElement>(null)\n  const headerRef = useRef<HTMLDivElement>(null)\n  const footerRef = useRef<HTMLDivElement>(null)\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Keeps track of the current height, or the height transitioning to\n  const heightRef = useRef(0)\n  const resizeSourceRef = useRef<ResizeSource>()\n\n  const prefersReducedMotion = useReducedMotion()\n\n  // \"Plugins\" huhuhu\n  const scrollLockRef = useScrollLock({\n    targetRef: scrollRef,\n    enabled: ready && scrollLocking,\n    reserveScrollBarGap,\n  })\n  const ariaHiderRef = useAriaHider({\n    targetRef: containerRef,\n    enabled: ready && blocking,\n  })\n  const focusTrapRef = useFocusTrap({\n    targetRef: containerRef,\n    fallbackRef: overlayRef,\n    initialFocusRef,\n    enabled: ready && blocking,\n  })\n\n  const { minSnap, maxSnap, maxHeight, findSnap } = useSnapPoints({\n    contentRef,\n    controlledMaxHeight,\n    footerEnabled: !!footer,\n    footerRef,\n    getSnapPoints,\n    headerEnabled: header !== false,\n    headerRef,\n    heightRef,\n    lastSnapRef,\n    ready,\n    registerReady,\n    resizeSourceRef,\n  })\n\n  // Setup refs that are used in cases where full control is needed over when a side effect is executed\n  const maxHeightRef = useRef(maxHeight)\n  const minSnapRef = useRef(minSnap)\n  const maxSnapRef = useRef(maxSnap)\n  const findSnapRef = useRef(findSnap)\n  const defaultSnapRef = useRef(0)\n  // Sync the refs with current state, giving the spring full control over when to respond to changes\n  useLayoutEffect(() => {\n    maxHeightRef.current = maxHeight\n    maxSnapRef.current = maxSnap\n    minSnapRef.current = minSnap\n    findSnapRef.current = findSnap\n    defaultSnapRef.current = findSnap(getDefaultSnap)\n  }, [findSnap, getDefaultSnap, maxHeight, maxSnap, minSnap])\n\n  // New utility for using events safely\n  const asyncSet = useCallback<typeof set>(\n    // @ts-expect-error\n    ({ onRest, config: { velocity = 1, ...config } = {}, ...opts }) =>\n      new Promise((resolve) =>\n        set({\n          ...opts,\n          config: {\n            velocity,\n            ...config,\n            // @see https://springs.pomb.us\n            mass: 1,\n            // \"stiffness\"\n            tension,\n            // \"damping\"\n            friction: Math.max(\n              friction,\n              friction + (friction - friction * velocity)\n            ),\n          },\n          onRest: (...args) => {\n            resolve(...args)\n            onRest?.(...args)\n          },\n        })\n      ),\n    [set]\n  )\n  const [current, send] = useMachine(overlayMachine, {\n    devTools: debugging,\n    actions: {\n      onOpenCancel: useCallback(\n        () => onSpringCancelRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onSnapCancel: useCallback(\n        (context) =>\n          onSpringCancelRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onCloseCancel: useCallback(\n        () => onSpringCancelRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeCancel: useCallback(\n        () =>\n          onSpringCancelRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      onOpenEnd: useCallback(\n        () => onSpringEndRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onSnapEnd: useCallback(\n        (context, event) =>\n          onSpringEndRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onResizeEnd: useCallback(\n        () =>\n          onSpringEndRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n    },\n    context: { initialState },\n    services: {\n      onSnapStart: useCallback(\n        async (context, event) =>\n          onSpringStartRef.current?.({\n            type: 'SNAP',\n            source: event.payload.source || 'custom',\n          }),\n        []\n      ),\n      onOpenStart: useCallback(\n        async () => onSpringStartRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onCloseStart: useCallback(\n        async () => onSpringStartRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeStart: useCallback(\n        async () =>\n          onSpringStartRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      onSnapEnd: useCallback(\n        async (context, event) =>\n          onSpringEndRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onOpenEnd: useCallback(\n        async () => onSpringEndRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onCloseEnd: useCallback(\n        async () => onSpringEndRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeEnd: useCallback(\n        async () =>\n          onSpringEndRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      renderVisuallyHidden: useCallback(\n        async (context, event) => {\n          await asyncSet({\n            y: defaultSnapRef.current,\n            ready: 0,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n            minSnap: defaultSnapRef.current,\n            immediate: true,\n          })\n        },\n        [asyncSet]\n      ),\n      activate: useCallback(\n        async (context, event) => {\n          canDragRef.current = true\n          await Promise.all([\n            scrollLockRef.current.activate(),\n            focusTrapRef.current.activate(),\n            ariaHiderRef.current.activate(),\n          ])\n        },\n        [ariaHiderRef, focusTrapRef, scrollLockRef]\n      ),\n      deactivate: useCallback(async () => {\n        scrollLockRef.current.deactivate()\n        focusTrapRef.current.deactivate()\n        ariaHiderRef.current.deactivate()\n        canDragRef.current = false\n      }, [ariaHiderRef, focusTrapRef, scrollLockRef]),\n      openImmediately: useCallback(async () => {\n        heightRef.current = defaultSnapRef.current\n        await asyncSet({\n          y: defaultSnapRef.current,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: true,\n        })\n      }, [asyncSet]),\n      openSmoothly: useCallback(async () => {\n        await asyncSet({\n          y: 0,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: true,\n        })\n\n        heightRef.current = defaultSnapRef.current\n\n        await asyncSet({\n          y: defaultSnapRef.current,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: prefersReducedMotion.current,\n        })\n      }, [asyncSet, prefersReducedMotion]),\n      snapSmoothly: useCallback(\n        async (context, event) => {\n          const snap = findSnapRef.current(context.y)\n          heightRef.current = snap\n          lastSnapRef.current = snap\n          await asyncSet({\n            y: snap,\n            ready: 1,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            minSnap: minSnapRef.current,\n            immediate: prefersReducedMotion.current,\n            config: { velocity: context.velocity },\n          })\n        },\n        [asyncSet, lastSnapRef, prefersReducedMotion]\n      ),\n      resizeSmoothly: useCallback(async () => {\n        const snap = findSnapRef.current(heightRef.current)\n        heightRef.current = snap\n        lastSnapRef.current = snap\n        await asyncSet({\n          y: snap,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          minSnap: minSnapRef.current,\n          immediate:\n            resizeSourceRef.current === 'element'\n              ? prefersReducedMotion.current\n              : true,\n        })\n      }, [asyncSet, lastSnapRef, prefersReducedMotion]),\n      closeSmoothly: useCallback(\n        async (context, event) => {\n          // Avoid animating the height property on close and stay within FLIP bounds by upping the minSnap\n          asyncSet({\n            minSnap: heightRef.current,\n            immediate: true,\n          })\n\n          heightRef.current = 0\n\n          await asyncSet({\n            y: 0,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            immediate: prefersReducedMotion.current,\n          })\n\n          await asyncSet({ ready: 0, immediate: true })\n        },\n        [asyncSet, prefersReducedMotion]\n      ),\n    },\n  })\n\n  useEffect(() => {\n    if (!ready) return\n\n    if (_open) {\n      send('OPEN')\n    } else {\n      send('CLOSE')\n    }\n  }, [_open, send, ready])\n  useLayoutEffect(() => {\n    // Adjust the height whenever the snap points are changed due to resize events\n    if (maxHeight || maxSnap || minSnap) {\n      send('RESIZE')\n    }\n  }, [maxHeight, maxSnap, minSnap, send])\n  useEffect(\n    () => () => {\n      // Ensure effects are cleaned up on unmount, in case they're not cleaned up otherwise\n      scrollLockRef.current.deactivate()\n      focusTrapRef.current.deactivate()\n      ariaHiderRef.current.deactivate()\n    },\n    [ariaHiderRef, focusTrapRef, scrollLockRef]\n  )\n\n  useImperativeHandle(\n    forwardRef,\n    () => ({\n      snapTo: (numberOrCallback, { velocity = 1, source = 'custom' } = {}) => {\n        send('SNAP', {\n          payload: {\n            y: findSnapRef.current(numberOrCallback),\n            velocity,\n            source,\n          },\n        })\n      },\n      get height() {\n        return heightRef.current\n      },\n    }),\n    [send]\n  )\n\n  const handleDrag = ({\n    args: [{ closeOnTap = false } = {}] = [],\n    cancel,\n    direction: [, direction],\n    down,\n    first,\n    last,\n    memo = spring.y.getValue() as number,\n    movement: [, _my],\n    tap,\n    velocity,\n  }) => {\n    const my = _my * -1\n\n    // Cancel the drag operation if the canDrag state changed\n    if (!canDragRef.current) {\n      console.log('handleDrag cancelled dragging because canDragRef is false')\n      cancel()\n      return memo\n    }\n\n    if (onDismiss && closeOnTap && tap) {\n      cancel()\n      // Runs onDismiss in a timeout to avoid tap events on the backdrop from triggering click events on elements underneath\n      setTimeout(() => onDismiss(), 0)\n      return memo\n    }\n\n    // Filter out taps\n    if (tap) {\n      return memo\n    }\n\n    const rawY = memo + my\n    const predictedDistance = my * velocity\n    const predictedY = Math.max(\n      minSnapRef.current,\n      Math.min(maxSnapRef.current, rawY + predictedDistance * 2)\n    )\n\n    if (\n      !down &&\n      onDismiss &&\n      direction > 0 &&\n      rawY + predictedDistance < minSnapRef.current / 2\n    ) {\n      cancel()\n      onDismiss()\n      return memo\n    }\n\n    let newY = down\n      ? // @TODO figure out a better way to deal with rubberband overshooting if min and max have the same value\n        !onDismiss && minSnapRef.current === maxSnapRef.current\n        ? rawY < minSnapRef.current\n          ? rubberbandIfOutOfBounds(\n              rawY,\n              minSnapRef.current,\n              maxSnapRef.current * 2,\n              0.55\n            )\n          : rubberbandIfOutOfBounds(\n              rawY,\n              minSnapRef.current / 2,\n              maxSnapRef.current,\n              0.55\n            )\n        : rubberbandIfOutOfBounds(\n            rawY,\n            onDismiss ? 0 : minSnapRef.current,\n            maxSnapRef.current,\n            0.55\n          )\n      : predictedY\n\n    if (first) {\n      send('DRAG')\n    }\n\n    if (last) {\n      send('SNAP', {\n        payload: {\n          y: newY,\n          velocity: velocity > 0.05 ? velocity : 1,\n          source: 'dragging',\n        },\n      })\n\n      return memo\n    }\n\n    // @TODO too many rerenders\n    //send('DRAG', { y: newY, velocity })\n    //*\n    set({\n      y: newY,\n      ready: 1,\n      maxHeight: maxHeightRef.current,\n      maxSnap: maxSnapRef.current,\n      minSnap: minSnapRef.current,\n      immediate: true,\n      config: { velocity },\n    })\n    // */\n\n    return memo\n  }\n\n  const bind = useDrag(handleDrag, {\n    filterTaps: true,\n  })\n\n  if (Number.isNaN(maxSnapRef.current)) {\n    throw new TypeError('maxSnapRef is NaN!!')\n  }\n  if (Number.isNaN(minSnapRef.current)) {\n    throw new TypeError('minSnapRef is NaN!!')\n  }\n\n  const interpolations = useSpringInterpolations({ spring })\n\n  return (\n    <animated.div\n      {...props}\n      data-rsbs-root\n      data-rsbs-state={publicStates.find(current.matches)}\n      data-rsbs-is-blocking={blocking}\n      data-rsbs-is-dismissable={!!onDismiss}\n      data-rsbs-has-header={!!header}\n      data-rsbs-has-footer={!!footer}\n      className={className}\n      ref={containerRef}\n      style={{\n        // spread in the interpolations yeees\n        ...interpolations,\n        // but allow overriding them/disabling them\n        ...style,\n        // Not overridable as the \"focus lock with opacity 0\" trick rely on it\n        // @TODO the line below only fails on TS <4\n        // @ts-ignore\n        opacity: spring.ready,\n      }}\n    >\n      {sibling}\n      {blocking && (\n        <div\n          // This component needs to be placed outside bottom-sheet, as bottom-sheet uses transform and thus creates a new context\n          // that clips this element to the container, not allowing it to cover the full page.\n          key=\"backdrop\"\n          data-rsbs-backdrop\n          {...bind({ closeOnTap: true })}\n        />\n      )}\n      <div\n        key=\"overlay\"\n        aria-modal=\"true\"\n        role=\"dialog\"\n        data-rsbs-overlay\n        tabIndex={-1}\n        ref={overlayRef}\n        onKeyDown={(event) => {\n          if (event.key === 'Escape') {\n            // Always stop propagation, to avoid weirdness for bottom sheets inside other bottom sheets\n            event.stopPropagation()\n            if (onDismiss) onDismiss()\n          }\n        }}\n      >\n        {header !== false && (\n          <div key=\"header\" data-rsbs-header ref={headerRef} {...bind()}>\n            {header}\n          </div>\n        )}\n        <div key=\"scroll\" data-rsbs-scroll ref={scrollRef}>\n          <div data-rsbs-content ref={contentRef}>\n            {children}\n          </div>\n        </div>\n        {footer && (\n          <div key=\"footer\" ref={footerRef} data-rsbs-footer {...bind()}>\n            {footer}\n          </div>\n        )}\n      </div>\n    </animated.div>\n  )\n})\n\n// Used for the data attribute, list over states available to CSS selectors\nconst publicStates = [\n  'closed',\n  'opening',\n  'open',\n  'closing',\n  'dragging',\n  'snapping',\n  'resizing',\n]\n\n// Default prop values that are callbacks, and it's nice to save some memory and reuse their instances since they're pure\nfunction _defaultSnap({ snapPoints, lastSnap }: defaultSnapProps) {\n  return lastSnap ?? Math.min(...snapPoints)\n}\nfunction _snapPoints({ minHeight }: SnapPointProps) {\n  return minHeight\n}\n","// Keeps track of wether everything is good to go or not, in the most efficient way possible\n\nimport { useCallback, useEffect, useState } from 'react'\n\nexport function useReady() {\n  const [ready, setReady] = useState(false)\n  const [readyMap, updateReadyMap] = useState<{ [key: string]: boolean }>({})\n\n  const registerReady = useCallback((key: string) => {\n    console.count(`registerReady:${key}`)\n    // Register the check we're gonna wait for until it's ready\n    updateReadyMap((ready) => ({ ...ready, [key]: false }))\n\n    return () => {\n      console.count(`setReady:${key}`)\n      // Set it to ready\n      updateReadyMap((ready) => ({ ...ready, [key]: true }))\n    }\n  }, [])\n\n  useEffect(() => {\n    const states = Object.values(readyMap)\n\n    if (states.length === 0) {\n      console.log('nope nothing registered yet')\n      return\n    }\n\n    const isReady = states.every(Boolean)\n    console.log('check if we are rready', readyMap, isReady)\n    if (isReady) {\n      console.warn('ready!')\n      setReady(true)\n    }\n  }, [readyMap])\n\n  return { ready, registerReady }\n}\n","import { useDebugValue, useEffect, useMemo, useRef } from 'react'\n\n// @TODO refactor to addEventListener\nexport function useReducedMotion() {\n  const mql = useMemo(\n    () =>\n      typeof window !== 'undefined'\n        ? window.matchMedia('(prefers-reduced-motion: reduce)')\n        : null,\n    []\n  )\n  const ref = useRef(mql?.matches)\n\n  useDebugValue(ref.current ? 'reduce' : 'no-preference')\n\n  useEffect(() => {\n    const handler = (event) => {\n      ref.current = event.matches\n    }\n    mql?.addListener(handler)\n\n    return () => mql?.removeListener(handler)\n  }, [mql])\n\n  return ref\n}\n","import { useSpring as useReactSpring } from 'react-spring'\n\n// Behold, the engine of it all!\n// Put in this file befause it makes it easier to type and I'm lazy! :D\n\nexport function useSpring() {\n  return useReactSpring(() => ({\n    y: 0,\n    ready: 0,\n    maxHeight: 0,\n    minSnap: 0,\n    maxSnap: 0,\n  }))\n}\n\nexport type Spring = ReturnType<typeof useSpring>[0]\nexport type SpringSet = ReturnType<typeof useSpring>[1]\n","import { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock'\nimport { useDebugValue, useEffect, useRef } from 'react'\n\n/**\n * Handle scroll locking to ensure a good dragging experience on Android and iOS.\n *\n * On iOS the following may happen if scroll isn't locked:\n * - When dragging the sheet the background gets dragged at the same time.\n * - When dragging the page scroll is also affected, causing the drag to feel buggy and \"slow\".\n *\n * On Android it causes the chrome toolbar to pop down as you drag down, and hide as you drag up.\n * When it's in between two toolbar states it causes the framerate to drop way below 60fps on\n * the bottom sheet drag interaction.\n */\nexport function useScrollLock({\n  targetRef,\n  enabled,\n  reserveScrollBarGap,\n}: {\n  targetRef: React.RefObject<Element>\n  enabled: boolean\n  reserveScrollBarGap: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate scroll lock too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const target = targetRef.current\n    let active = false\n\n    ref.current = {\n      activate: () => {\n        if (active) return\n        active = true\n        disableBodyScroll(target, {\n          allowTouchMove: (el) => el.closest('[data-body-scroll-lock-ignore]'),\n          reserveScrollBarGap,\n        })\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n        enableBodyScroll(target)\n      },\n    }\n  }, [enabled, targetRef, reserveScrollBarGap])\n\n  return ref\n}\n","import React, { useDebugValue, useEffect, useRef } from 'react'\n\n// Handle hiding and restoring aria-hidden attributes\nexport function useAriaHider({\n  targetRef,\n  enabled,\n}: {\n  targetRef: React.RefObject<Element>\n  enabled: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate aria hider too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const target = targetRef.current\n    let active = false\n    let originalValues: (null | string)[] = []\n    let rootNodes: Element[] = []\n\n    ref.current = {\n      activate: () => {\n        if (active) return\n        active = true\n\n        const parentNode = target.parentNode\n\n        document.querySelectorAll('body > *').forEach((node) => {\n          if (node === parentNode) {\n            return\n          }\n          let attr = node.getAttribute('aria-hidden')\n          let alreadyHidden = attr !== null && attr !== 'false'\n          if (alreadyHidden) {\n            return\n          }\n          originalValues.push(attr)\n          rootNodes.push(node)\n          node.setAttribute('aria-hidden', 'true')\n        })\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n\n        rootNodes.forEach((node, index) => {\n          let originalValue = originalValues[index]\n          if (originalValue === null) {\n            node.removeAttribute('aria-hidden')\n          } else {\n            node.setAttribute('aria-hidden', originalValue)\n          }\n        })\n        originalValues = []\n        rootNodes = []\n      },\n    }\n  }, [targetRef, enabled])\n\n  return ref\n}\n","import { createFocusTrap } from 'focus-trap'\nimport { useDebugValue, useEffect, useRef } from 'react'\n\nexport function useFocusTrap({\n  targetRef,\n  fallbackRef,\n  initialFocusRef,\n  enabled,\n}: {\n  targetRef: React.RefObject<HTMLElement>\n  fallbackRef: React.RefObject<HTMLElement>\n  initialFocusRef?: React.RefObject<HTMLElement>\n  enabled: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate focus trap too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const fallback = fallbackRef.current\n    const trap = createFocusTrap(targetRef.current, {\n      onActivate:\n        process.env.NODE_ENV !== 'production'\n          ? () => {\n              console.log('focus activate')\n            }\n          : undefined,\n      // If initialFocusRef is manually specified we don't want the first tabbable element to receive focus if initialFocusRef can't be found\n      initialFocus: initialFocusRef\n        ? () => initialFocusRef?.current || fallback\n        : undefined,\n      fallbackFocus: fallback,\n      escapeDeactivates: false,\n      clickOutsideDeactivates: false,\n    })\n    let active = false\n\n    ref.current = {\n      activate: async () => {\n        if (active) return\n        active = true\n\n        await trap.activate()\n        // it's difficult to know exactly when focus is udpated https://github.com/focus-trap/focus-trap/blob/036a72ec48b85414dda00ec0c40d631c8f0ae5ce/index.js#L369-L371\n        // This timeout is attempting to compromise between a reasonable guess, as well as not delaying the open transition more than necessary\n        await new Promise((resolve) => setTimeout(() => resolve(void 1), 0))\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n\n        trap.deactivate()\n      },\n    }\n  }, [enabled, fallbackRef, initialFocusRef, targetRef])\n\n  return ref\n}\n","import { interpolate } from 'react-spring'\nimport type { Spring } from './useSpring'\nimport { clamp } from '../utils'\n\n// It's a bit easier to ensure interpolations don't accidentally use the wrong variables by\n// putting them here, in their own closure with explicitly defined variables used\n\n// Note that the callbacks in the interpolation functions close over their scope every time react renders\n// so it's important that if anything can change outside of render that needs to be available\n// in the interpolation then a ref must be used\n\nexport function useSpringInterpolations({\n  spring,\n}: {\n  spring: Spring\n}): React.CSSProperties {\n  // This effect is for removing rounded corners on phones when the sheet touches the top of the browser chrome\n  // as it's really ugly with the gaps border radius creates. This ensures it looks sleek.\n  // @TODO the ts-ignore comments are because the `extrapolate` param isn't in the TS defs for some reason\n  const interpolateBorderRadius = interpolate(\n    // @ts-expect-error\n    [spring.y, spring.maxHeight],\n    (y, maxHeight) => {\n      return `${Math.round(clamp(maxHeight - y, 0, 16))}px`\n    }\n  )\n\n  /*\n   * Only animate the height when absolute necessary\n   * @TODO currently it's only able to opt out of changing the height if there's just a single snapshot\n   *       but it should be possible to do it in other scenarios too, like on window resize,\n   *       or maybe even while dragging, but probably requires a more restrictive CSS.\n   *       As in now the sticky footer isn't overlapping the content, allowing `backdrop-filter: blur(8px)` effects.\n   *       A FLIP resize flow for content height would likely require the sticky elements to overlap the content area.\n   *       Could be done as a separat mode though, or a separate example CSS for max performance.\n   */\n  const interpolateHeight = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap, spring.maxSnap],\n    (y, minSnap, maxSnap) => `${clamp(y, minSnap, maxSnap)}px`\n  )\n\n  const interpolateY = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap, spring.maxSnap],\n    (y, minSnap, maxSnap) => {\n      if (y < minSnap) {\n        return `${minSnap - y}px`\n      }\n      if (y > maxSnap) {\n        return `${maxSnap - y}px`\n      }\n      return '0px'\n    }\n  )\n\n  const interpolateFiller = interpolate(\n    // @ts-ignore\n    [spring.y, spring.maxSnap],\n    (y, maxSnap) => {\n      if (y >= maxSnap) {\n        return Math.ceil(y - maxSnap)\n      }\n      return 0\n    }\n  )\n\n  const interpolateContentOpacity = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap],\n    (y, minSnap) => {\n      if (!minSnap) {\n        return 0\n      }\n      const minX = Math.max(minSnap / 2 - 45, 0)\n      const maxX = Math.min(minSnap / 2 + 45, minSnap)\n      const minY = 0\n      const maxY = 1\n\n      const slope = (maxY - minY) / (maxX - minX)\n      const res = (y - minX) * (slope + minY)\n      return clamp(res, 0, 1)\n    }\n  )\n\n  const interpolateBackdrop = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap],\n    (y, minSnap) => (minSnap ? clamp(y / minSnap, 0, 1) : 0)\n  )\n\n  return {\n    // Fancy content fade-in effect\n    ['--rsbs-content-opacity' as any]: interpolateContentOpacity,\n    // Fading in the backdrop\n    ['--rsbs-backdrop-opacity' as any]: interpolateBackdrop,\n    // Scaling the antigap in the bottom\n    ['--rsbs-antigap-scale-y' as any]: interpolateFiller,\n    // Shifts the position of the bottom sheet, used on open and close primarily as snap point changes usually only interpolate the height\n    ['--rsbs-overlay-translate-y' as any]: interpolateY,\n    // Remove rounded borders when full height, it looks much better this way\n    ['--rsbs-overlay-rounded' as any]: interpolateBorderRadius,\n    // Animates the height state, not the most performant way but it's the safest with regards to mobile browser and focus/scrolling that could happen while animating\n    ['--rsbs-overlay-h' as any]: interpolateHeight,\n  }\n}\n","/* eslint-disable react/jsx-pascal-case */\nimport Portal from '@reach/portal'\nimport React, { forwardRef, useRef, useState, useCallback } from 'react'\nimport { BottomSheet as _BottomSheet } from './BottomSheet'\nimport type { Props, RefHandles, SpringEvent } from './types'\nimport { useLayoutEffect } from './hooks'\n\nexport type {\n  RefHandles as BottomSheetRef,\n  Props as BottomSheetProps,\n} from './types'\n\n// Because SSR is annoying to deal with, and all the million complaints about window, navigator and dom elenents!\nexport const BottomSheet = forwardRef<RefHandles, Props>(function BottomSheet(\n  { onSpringStart, onSpringEnd, skipInitialTransition, ...props },\n  ref\n) {\n  // Mounted state, helps SSR but also ensures you can't tab into the sheet while it's closed, or nav there in a screen reader\n  const [mounted, setMounted] = useState(false)\n  const timerRef = useRef<ReturnType<typeof requestAnimationFrame>>()\n  // The last point that the user snapped to, useful for open/closed toggling and the user defined height is remembered\n  const lastSnapRef = useRef(null)\n  // @TODO refactor to an initialState: OPEN | CLOSED property as it's much easier to understand\n  // And informs what we should animate from. If the sheet is mounted with open = true, then initialState = OPEN.\n  // When initialState = CLOSED, then internal sheet must first render with open={false} before setting open={props.open}\n  // It's only when initialState and props.open is mismatching that a intial transition should happen\n  // If they match then transitions will only happen when a user interaction or resize event happen.\n  const initialStateRef = useRef<'OPEN' | 'CLOSED'>(\n    skipInitialTransition && props.open ? 'OPEN' : 'CLOSED'\n  )\n\n  // Using layout effect to support cases where the bottom sheet have to appear already open, no transition\n  useLayoutEffect(() => {\n    if (props.open) {\n      cancelAnimationFrame(timerRef.current)\n      setMounted(true)\n\n      // Cleanup defaultOpen state on close\n      return () => {\n        initialStateRef.current = 'CLOSED'\n      }\n    }\n  }, [props.open])\n\n  const handleSpringStart = useCallback(\n    async function handleSpringStart(event: SpringEvent) {\n      // Forward the event\n      await onSpringStart?.(event)\n\n      if (event.type === 'OPEN') {\n        // Ensures that when it's opening we abort any pending unmount action\n        cancelAnimationFrame(timerRef.current)\n      }\n    },\n    [onSpringStart]\n  )\n\n  const handleSpringEnd = useCallback(\n    async function handleSpringEnd(event: SpringEvent) {\n      // Forward the event\n      await onSpringEnd?.(event)\n\n      if (event.type === 'CLOSE') {\n        // Unmount from the dom to avoid contents being tabbable or visible to screen readers while closed\n        timerRef.current = requestAnimationFrame(() => setMounted(false))\n      }\n    },\n    [onSpringEnd]\n  )\n\n  // This isn't just a performance optimization, it's also to avoid issues when running a non-browser env like SSR\n  if (!mounted) {\n    return null\n  }\n\n  return (\n    <Portal data-rsbs-portal>\n      <_BottomSheet\n        {...props}\n        lastSnapRef={lastSnapRef}\n        ref={ref}\n        initialState={initialStateRef.current}\n        onSpringStart={handleSpringStart}\n        onSpringEnd={handleSpringEnd}\n      />\n    </Portal>\n  )\n})\n"]},"metadata":{},"sourceType":"module"}